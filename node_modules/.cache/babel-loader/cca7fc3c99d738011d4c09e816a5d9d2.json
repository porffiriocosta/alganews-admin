{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactProjetos\\\\alganews-admin\\\\src\\\\app\\\\features\\\\UserList.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Space, Switch, Table, Tag, Avatar, Card, Input, Descriptions, Tooltip, Row } from 'antd';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { useEffect, useState } from 'react';\nimport useUsers from '../../core/hooks/useUsers';\nimport { EyeOutlined, EditOutlined, SearchOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport Forbidden from '../components/Forbidden';\nimport { useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserList() {\n  _s();\n\n  const {\n    users,\n    fetchUsers,\n    toggleUserStatus,\n    fetching\n  } = useUsers();\n  const [forbidden, setForbidden] = useState(false);\n\n  const _fetchUsers = useCallback(() => {\n    fetchUsers().catch(err => {\n      var _err$data;\n\n      if ((err === null || err === void 0 ? void 0 : (_err$data = err.data) === null || _err$data === void 0 ? void 0 : _err$data.status) === 403) {\n        setForbidden(true);\n        return;\n      }\n\n      throw err;\n    });\n  }, [fetchUsers]);\n\n  useEffect(() => {\n    _fetchUsers();\n  }, [_fetchUsers]);\n\n  const getColumnSearchProps = (dataIndex, displayName) => ({\n    filterDropdown: ({\n      selectedKeys,\n      setSelectedKeys,\n      confirm,\n      clearFilters\n    }) => /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        style: {\n          marginBottom: 8,\n          display: 'block'\n        },\n        value: selectedKeys[0],\n        placeholder: `Buscar ${displayName || dataIndex}`,\n        onChange: e => {\n          setSelectedKeys(e.target.value ? [e.target.value] : []);\n        },\n        onPressEnter: () => confirm()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: 'primary',\n          size: 'small',\n          style: {\n            width: 90\n          },\n          onClick: () => confirm(),\n          icon: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 19\n          }, this),\n          children: \"Buscar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: clearFilters,\n          size: 'small',\n          style: {\n            width: 90\n          },\n          children: \"Limpar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this),\n    filterIcon: filtered => /*#__PURE__*/_jsxDEV(SearchOutlined, {\n      style: {\n        color: filtered ? '#0099ff' : undefined\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this),\n    // @ts-ignore\n    onFilter: (value, record) => record[dataIndex] ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()) : ''\n  });\n\n  if (forbidden) return /*#__PURE__*/_jsxDEV(Forbidden, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      justify: \"end\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: _fetchUsers,\n        loading: fetching,\n        icon: /*#__PURE__*/_jsxDEV(ReloadOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this),\n        children: \"Atualizar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      loading: fetching,\n      dataSource: users,\n      pagination: false,\n      rowKey: 'id',\n      columns: [{\n        title: 'Usuários',\n        responsive: ['xs'],\n\n        render(user) {\n          return /*#__PURE__*/_jsxDEV(Descriptions, {\n            column: 1,\n            size: 'small',\n            children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: 'Nome',\n              children: user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: 'Email',\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: 'Criação',\n              children: format(parseISO(user.createdAt), 'dd/MM/yyyy')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: 'Perfil',\n              children: /*#__PURE__*/_jsxDEV(Tag, {\n                color: user.role === 'MANAGER' ? 'red' : 'blue',\n                children: user.role === 'EDITOR' ? 'Editor' : user.role === 'MANAGER' ? 'Gerente' : 'Assistente'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: 'Ações',\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Visualizar usu\\xE1rio\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/usuarios/${user.id}`,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    icon: /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 52\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: 'Editar usuário',\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/usuarios/edicao/${user.id}`,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"small\",\n                    icon: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 52\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this);\n        }\n\n      }, {\n        dataIndex: 'avatarUrls',\n        title: '',\n        width: 48,\n        fixed: 'left',\n        responsive: ['sm'],\n\n        render(avatarUrls) {\n          return /*#__PURE__*/_jsxDEV(Avatar, {\n            size: 'small',\n            src: avatarUrls.small\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 22\n          }, this);\n        }\n\n      }, {\n        dataIndex: 'name',\n        title: 'Nome',\n        ...getColumnSearchProps('name', 'nome'),\n        width: 160,\n        responsive: ['sm'],\n        ellipsis: true\n      }, {\n        dataIndex: 'email',\n        title: 'Email',\n        responsive: ['md'],\n        ellipsis: true,\n        width: 240,\n        ...getColumnSearchProps('email', 'Email')\n      }, {\n        dataIndex: 'role',\n        title: 'Perfil',\n        align: 'center',\n        responsive: ['sm'],\n        width: 100,\n\n        sorter(a, b) {\n          return a.role.localeCompare(b.role);\n        },\n\n        render(role) {\n          return /*#__PURE__*/_jsxDEV(Tag, {\n            color: role === 'MANAGER' ? 'red' : 'blue',\n            children: role === 'EDITOR' ? 'Editor' : role === 'MANAGER' ? 'Gerente' : 'Assistente'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }, this);\n        }\n\n      }, {\n        dataIndex: 'createdAt',\n        title: 'Criação',\n        align: 'center',\n        responsive: ['lg'],\n\n        sorter(a, b) {\n          return new Date(a.createdAt) > new Date(b.createdAt) ? 1 : -1;\n        },\n\n        width: 120,\n\n        render(createdAt) {\n          return format(parseISO(createdAt), 'dd/MM/yyyy');\n        }\n\n      }, {\n        dataIndex: 'active',\n        title: 'Ativo',\n        align: 'center',\n        width: 100,\n        responsive: ['sm'],\n\n        render(active, user) {\n          return /*#__PURE__*/_jsxDEV(Switch, {\n            disabled: active && !user.canBeDeactivated || !active && !user.canBeActivated,\n            onChange: () => {\n              toggleUserStatus(user);\n            },\n            checked: active\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }, this);\n        }\n\n      }, {\n        dataIndex: 'id',\n        title: 'Ações',\n        align: 'center',\n        width: 100,\n        responsive: ['sm'],\n\n        render(id) {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: 'Visualizar usuário',\n              placement: 'left',\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/usuarios/${id}`,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  icon: /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 50\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: 'Editar usuario',\n              placement: 'right',\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/usuarios/edicao/${id}`,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  icon: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 50\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true);\n        }\n\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UserList, \"iRO4hySEf++PpPB6mFj09hJsqPI=\", false, function () {\n  return [useUsers];\n});\n\n_c = UserList;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/app/features/UserList.tsx"],"names":["Button","Space","Switch","Table","Tag","Avatar","Card","Input","Descriptions","Tooltip","Row","format","parseISO","useEffect","useState","useUsers","EyeOutlined","EditOutlined","SearchOutlined","ReloadOutlined","Link","Forbidden","useCallback","UserList","users","fetchUsers","toggleUserStatus","fetching","forbidden","setForbidden","_fetchUsers","catch","err","data","status","getColumnSearchProps","dataIndex","displayName","filterDropdown","selectedKeys","setSelectedKeys","confirm","clearFilters","marginBottom","display","e","target","value","width","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","title","responsive","render","user","name","email","createdAt","role","id","fixed","avatarUrls","small","ellipsis","align","sorter","a","b","localeCompare","Date","active","canBeDeactivated","canBeActivated"],"mappings":"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","sourcesContent":["import {\n  Button,\n  Space,\n  Switch,\n  Table,\n  Tag,\n  Avatar,\n  Card,\n  Input,\n  Descriptions,\n  Tooltip,\n  Row,\n} from 'antd';\nimport { User } from 'danielbonifacio-sdk';\nimport format from 'date-fns/format';\nimport parseISO from 'date-fns/parseISO';\nimport { useEffect, useState } from 'react';\nimport useUsers from '../../core/hooks/useUsers';\nimport {\n  EyeOutlined,\n  EditOutlined,\n  SearchOutlined,\n  ReloadOutlined,\n} from '@ant-design/icons';\nimport { ColumnProps } from 'antd/lib/table';\nimport { Link } from 'react-router-dom';\nimport Forbidden from '../components/Forbidden';\nimport { useCallback } from 'react';\n\nexport default function UserList() {\n  const { users, fetchUsers, toggleUserStatus, fetching } = useUsers();\n\n  const [forbidden, setForbidden] = useState(false);\n\n  const _fetchUsers = useCallback(() => {\n    fetchUsers().catch((err) => {\n      if (err?.data?.status === 403) {\n        setForbidden(true);\n        return;\n      }\n      throw err;\n    });\n  }, [fetchUsers]);\n\n  useEffect(() => {\n    _fetchUsers();\n  }, [_fetchUsers]);\n\n  const getColumnSearchProps = (\n    dataIndex: keyof User.Summary,\n    displayName?: string\n  ): ColumnProps<User.Summary> => ({\n    filterDropdown: ({\n      selectedKeys,\n      setSelectedKeys,\n      confirm,\n      clearFilters,\n    }) => (\n      <Card>\n        <Input\n          style={{ marginBottom: 8, display: 'block' }}\n          value={selectedKeys[0]}\n          placeholder={`Buscar ${displayName || dataIndex}`}\n          onChange={(e) => {\n            setSelectedKeys(e.target.value ? [e.target.value] : []);\n          }}\n          onPressEnter={() => confirm()}\n        />\n        <Space>\n          <Button\n            type={'primary'}\n            size={'small'}\n            style={{ width: 90 }}\n            onClick={() => confirm()}\n            icon={<SearchOutlined />}\n          >\n            Buscar\n          </Button>\n          <Button onClick={clearFilters} size={'small'} style={{ width: 90 }}>\n            Limpar\n          </Button>\n        </Space>\n      </Card>\n    ),\n    filterIcon: (filtered: boolean) => (\n      <SearchOutlined style={{ color: filtered ? '#0099ff' : undefined }} />\n    ),\n    // @ts-ignore\n    onFilter: (value, record) =>\n      record[dataIndex]\n        ? record[dataIndex]\n            .toString()\n            .toLowerCase()\n            .includes((value as string).toLowerCase())\n        : '',\n  });\n\n  if (forbidden) return <Forbidden />;\n\n  return (\n    <>\n      <Row justify='end'>\n        <Button\n          onClick={_fetchUsers}\n          loading={fetching}\n          icon={<ReloadOutlined />}\n        >\n          Atualizar\n        </Button>\n      </Row>\n      <Table<User.Summary>\n        loading={fetching}\n        dataSource={users}\n        pagination={false}\n        rowKey={'id'}\n        columns={[\n          {\n            title: 'Usuários',\n            responsive: ['xs'],\n            render(user: User.Summary) {\n              return (\n                <Descriptions column={1} size={'small'}>\n                  <Descriptions.Item label={'Nome'}>\n                    {user.name}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Email'}>\n                    {user.email}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Criação'}>\n                    {format(parseISO(user.createdAt), 'dd/MM/yyyy')}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Perfil'}>\n                    <Tag color={user.role === 'MANAGER' ? 'red' : 'blue'}>\n                      {user.role === 'EDITOR'\n                        ? 'Editor'\n                        : user.role === 'MANAGER'\n                        ? 'Gerente'\n                        : 'Assistente'}\n                    </Tag>\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Ações'}>\n                    <Tooltip title='Visualizar usuário'>\n                      <Link to={`/usuarios/${user.id}`}>\n                        <Button size='small' icon={<EyeOutlined />} />\n                      </Link>\n                    </Tooltip>\n                    <Tooltip title={'Editar usuário'}>\n                      <Link to={`/usuarios/edicao/${user.id}`}>\n                        <Button size='small' icon={<EditOutlined />} />\n                      </Link>\n                    </Tooltip>\n                  </Descriptions.Item>\n                </Descriptions>\n              );\n            },\n          },\n          {\n            dataIndex: 'avatarUrls',\n            title: '',\n            width: 48,\n            fixed: 'left',\n            responsive: ['sm'],\n            render(avatarUrls: User.Summary['avatarUrls']) {\n              return <Avatar size={'small'} src={avatarUrls.small} />;\n            },\n          },\n          {\n            dataIndex: 'name',\n            title: 'Nome',\n            ...getColumnSearchProps('name', 'nome'),\n            width: 160,\n            responsive: ['sm'],\n            ellipsis: true,\n          },\n          {\n            dataIndex: 'email',\n            title: 'Email',\n            responsive: ['md'],\n            ellipsis: true,\n            width: 240,\n            ...getColumnSearchProps('email', 'Email'),\n          },\n          {\n            dataIndex: 'role',\n            title: 'Perfil',\n            align: 'center',\n            responsive: ['sm'],\n            width: 100,\n            sorter(a, b) {\n              return a.role.localeCompare(b.role);\n            },\n            render(role) {\n              return (\n                <Tag color={role === 'MANAGER' ? 'red' : 'blue'}>\n                  {role === 'EDITOR'\n                    ? 'Editor'\n                    : role === 'MANAGER'\n                    ? 'Gerente'\n                    : 'Assistente'}\n                </Tag>\n              );\n            },\n          },\n          {\n            dataIndex: 'createdAt',\n            title: 'Criação',\n            align: 'center',\n            responsive: ['lg'],\n            sorter(a, b) {\n              return new Date(a.createdAt) > new Date(b.createdAt) ? 1 : -1;\n            },\n            width: 120,\n            render(createdAt: string) {\n              return format(parseISO(createdAt), 'dd/MM/yyyy');\n            },\n          },\n          {\n            dataIndex: 'active',\n            title: 'Ativo',\n            align: 'center',\n            width: 100,\n            responsive: ['sm'],\n            render(active: boolean, user) {\n              return (\n                <Switch\n                  disabled={\n                    (active && !user.canBeDeactivated) ||\n                    (!active && !user.canBeActivated)\n                  }\n                  onChange={() => {\n                    toggleUserStatus(user);\n                  }}\n                  checked={active}\n                />\n              );\n            },\n          },\n          {\n            dataIndex: 'id',\n            title: 'Ações',\n            align: 'center',\n            width: 100,\n            responsive: ['sm'],\n            render(id: number) {\n              return (\n                <>\n                  <Tooltip title={'Visualizar usuário'} placement={'left'}>\n                    <Link to={`/usuarios/${id}`}>\n                      <Button size='small' icon={<EyeOutlined />} />\n                    </Link>\n                  </Tooltip>\n                  <Tooltip title={'Editar usuario'} placement={'right'}>\n                    <Link to={`/usuarios/edicao/${id}`}>\n                      <Button size='small' icon={<EditOutlined />} />\n                    </Link>\n                  </Tooltip>\n                </>\n              );\n            },\n          },\n        ]}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}