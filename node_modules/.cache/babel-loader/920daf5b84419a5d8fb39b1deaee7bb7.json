{"ast":null,"code":"import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{PostService}from'danielbonifacio-sdk';import{useCallback,useState}from'react';export default function usePosts(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadingFetch=_useState2[0],setLoadingFetch=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingToggle=_useState4[0],setLoadingToggle=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var fetchUserPosts=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){var page,_posts,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page=_args.length>1&&_args[1]!==undefined?_args[1]:0;setLoadingFetch(true);_context.prev=2;_context.next=5;return PostService.getAllPosts({editorId:userId,showAll:true,page:page,size:10});case 5:_posts=_context.sent;setPosts(_posts);case 7:_context.prev=7;setLoadingFetch(false);return _context.finish(7);case 10:case\"end\":return _context.stop();}}},_callee,null,[[2,,7,10]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var togglePostStatus=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(post){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoadingToggle(true);_context2.prev=1;if(!post.published){_context2.next=7;break;}_context2.next=5;return PostService.deactivateExistingPost(post.id);case 5:_context2.next=9;break;case 7:_context2.next=9;return PostService.publishExistingPost(post.id);case 9:_context2.prev=9;setLoadingToggle(false);return _context2.finish(9);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,,9,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}(),[]);return{fetchUserPosts:fetchUserPosts,posts:posts,togglePostStatus:togglePostStatus,loadingFetch:loadingFetch,loadingToggle:loadingToggle};}","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/core/hooks/usePosts.ts"],"names":["PostService","useCallback","useState","usePosts","loadingFetch","setLoadingFetch","loadingToggle","setLoadingToggle","posts","setPosts","fetchUserPosts","userId","page","getAllPosts","editorId","showAll","size","togglePostStatus","post","published","deactivateExistingPost","id","publishExistingPost"],"mappings":"+bAAA,OAASA,WAAT,KAAkC,qBAAlC,CACA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,OAAtC,CAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,eACOD,QAAQ,CAAC,KAAD,CADf,wCAC1BE,YAD0B,eACZC,eADY,8BAESH,QAAQ,CAAC,KAAD,CAFjB,yCAE1BI,aAF0B,eAEXC,gBAFW,8BAGPL,QAAQ,EAHD,yCAG1BM,KAH0B,eAGnBC,QAHmB,eAKjC,GAAMC,CAAAA,cAAc,CAAGT,WAAW,0FAChC,iBAAOU,MAAP,kJAAuBC,IAAvB,+CAA8B,CAA9B,CACEP,eAAe,CAAC,IAAD,CAAf,CADF,sCAGwBL,CAAAA,WAAW,CAACa,WAAZ,CAAwB,CAC1CC,QAAQ,CAAEH,MADgC,CAE1CI,OAAO,CAAE,IAFiC,CAG1CH,IAAI,CAAJA,IAH0C,CAI1CI,IAAI,CAAE,EAJoC,CAAxB,CAHxB,QAGUR,MAHV,eASIC,QAAQ,CAACD,MAAD,CAAR,CATJ,uBAWIH,eAAe,CAAC,KAAD,CAAf,CAXJ,kGADgC,+DAehC,EAfgC,CAAlC,CAkBA,GAAMY,CAAAA,gBAAgB,CAAGhB,WAAW,2FAClC,kBAAOiB,IAAP,sHACEX,gBAAgB,CAAC,IAAD,CAAhB,CADF,qBAGIW,IAAI,CAACC,SAHT,iDAIcnB,CAAAA,WAAW,CAACoB,sBAAZ,CACJF,IAAI,CAACG,EADD,CAJd,6DAOcrB,CAAAA,WAAW,CAACsB,mBAAZ,CAAgCJ,IAAI,CAACG,EAArC,CAPd,yBASId,gBAAgB,CAAC,KAAD,CAAhB,CATJ,qGADkC,iEAalC,EAbkC,CAApC,CAgBA,MAAO,CACLG,cAAc,CAAdA,cADK,CAELF,KAAK,CAALA,KAFK,CAGLS,gBAAgB,CAAhBA,gBAHK,CAILb,YAAY,CAAZA,YAJK,CAKLE,aAAa,CAAbA,aALK,CAAP,CAOD","sourcesContent":["import { PostService, Post } from 'danielbonifacio-sdk';\nimport { useCallback, useState } from 'react';\n\nexport default function usePosts() {\n  const [loadingFetch, setLoadingFetch] = useState(false);\n  const [loadingToggle, setLoadingToggle] = useState(false);\n  const [posts, setPosts] = useState<Post.Paginated>();\n\n  const fetchUserPosts = useCallback(\n    async (userId: number, page = 0) => {\n      setLoadingFetch(true);\n      try {\n        const posts = await PostService.getAllPosts({\n          editorId: userId,\n          showAll: true,\n          page,\n          size: 10,\n        });\n        setPosts(posts);\n      } finally {\n        setLoadingFetch(false);\n      }\n    },\n    []\n  );\n\n  const togglePostStatus = useCallback(\n    async (post: Post.Summary | Post.Detailed) => {\n      setLoadingToggle(true);\n      try {\n        post.published\n          ? await PostService.deactivateExistingPost(\n              post.id\n            )\n          : await PostService.publishExistingPost(post.id);\n      } finally {\n        setLoadingToggle(false);\n      }\n    },\n    []\n  );\n\n  return {\n    fetchUserPosts,\n    posts,\n    togglePostStatus,\n    loadingFetch,\n    loadingToggle,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}