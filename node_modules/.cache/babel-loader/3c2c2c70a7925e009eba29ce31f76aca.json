{"ast":null,"code":"import _objectSpread from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{DeleteOutlined,PlusOutlined}from'@ant-design/icons';import{Button,Col,DatePicker,Descriptions,Divider,Form,Input,notification,Row,Select,Skeleton,Space,Tabs,Tooltip}from'antd';import{useForm}from'antd/lib/form/Form';import moment from'moment';import{useCallback}from'react';import debounce from'lodash.debounce';import{InfoCircleFilled}from'@ant-design/icons';import useUsers from'../../core/hooks/useUsers';import CurrencyInput from'../components/CurrencyInput';import usePayment from'../../core/hooks/usePayment';import transformIntoBrl from'../../core/utils/transformIntoBrl';import{useState}from'react';import AskForPaymentPreview from'./AskForPaymentPreview';import{BusinessError}from'danielbonifacio-sdk/dist/errors';import{useEffect}from'react';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PaymentForm(){var _useForm=useForm(),_useForm2=_slicedToArray(_useForm,1),form=_useForm2[0];var _useUsers=useUsers(),editors=_useUsers.editors,fetchUsers=_useUsers.fetchUsers,fetching=_useUsers.fetching;var history=useHistory();var _usePayment=usePayment(),fetchingPaymentPreview=_usePayment.fetchingPaymentPreview,clearPaymentPreview=_usePayment.clearPaymentPreview,paymentPreview=_usePayment.paymentPreview,fetchPaymentPreview=_usePayment.fetchPaymentPreview,schedulePayment=_usePayment.schedulePayment,schedulingPayment=_usePayment.schedulingPayment;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),scheduledTo=_useState2[0],setScheduledTo=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),paymentPreviewError=_useState4[0],setPaymentPreviewError=_useState4[1];useEffect(function(){fetchUsers();},[fetchUsers]);var updateScheduleDate=useCallback(function(){var _form$getFieldsValue=form.getFieldsValue(),scheduledTo=_form$getFieldsValue.scheduledTo;setScheduledTo(scheduledTo);},[form]);var clearPaymentPreviewError=useCallback(function(){setPaymentPreviewError(undefined);},[]);var getPaymentPreview=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _form$getFieldsValue2,accountingPeriod,bonuses,payee;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_form$getFieldsValue2=form.getFieldsValue(),accountingPeriod=_form$getFieldsValue2.accountingPeriod,bonuses=_form$getFieldsValue2.bonuses,payee=_form$getFieldsValue2.payee;if(!(payee&&accountingPeriod)){_context.next=18;break;}if(!(payee.id&&accountingPeriod.endsOn&&accountingPeriod.startsOn)){_context.next=16;break;}_context.prev=3;_context.next=6;return fetchPaymentPreview({payee:payee,accountingPeriod:accountingPeriod,bonuses:bonuses||[]});case 6:clearPaymentPreviewError();_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);clearPaymentPreview();if(_context.t0 instanceof BusinessError){setPaymentPreviewError(_context.t0);}throw _context.t0;case 14:_context.next=18;break;case 16:clearPaymentPreview();clearPaymentPreviewError();case 18:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);})),[form,fetchPaymentPreview,clearPaymentPreview,clearPaymentPreviewError]);var handleFormChange=useCallback(function(_ref2){var _ref3=_slicedToArray(_ref2,1),field=_ref3[0];if(Array.isArray(field===null||field===void 0?void 0:field.name)){if(field.name.includes('payee')||field.name.includes('_accountingPeriod')||field.name.includes('bonuses')){getPaymentPreview();}if(field.name.includes('scheduledTo')){updateScheduleDate();}}},[getPaymentPreview,updateScheduleDate]);var debouncedHandleFormChange=debounce(handleFormChange,1000);var handleFormSubmit=useCallback(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(form){var paymentDto;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:paymentDto={accountingPeriod:form.accountingPeriod,payee:form.payee,bonuses:form.bonuses||[],scheduledTo:moment(form.scheduledTo).format('YYYY-MM-DD')};_context2.next=3;return schedulePayment(paymentDto);case 3:notification.success({message:'Pagamento agendado com sucesso'});history.push('/pagamentos');case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref4.apply(this,arguments);};}(),[schedulePayment,history]);return/*#__PURE__*/_jsxs(Form,{form:form,layout:'vertical',onFieldsChange:debouncedHandleFormChange,onFinish:handleFormSubmit,children:[/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{rules:[{required:true,message:'O campo é obrigatório'}],label:'Editor',name:['payee','id'],children:/*#__PURE__*/_jsx(Select,{showSearch:true,loading:fetching,placeholder:fetching?'Carregando editores...':'Selecione um editor',filterOption:function filterOption(input,option){return(option===null||option===void 0?void 0:option.children.normalize('NFD').replace(/[\\u0300-\\u036f]/g,'').toLowerCase().indexOf(input.toLowerCase()))>=0||(option===null||option===void 0?void 0:option.children).toLowerCase().indexOf(input.toLowerCase())>=0;},children:editors.map(function(editor){return/*#__PURE__*/_jsx(Select.Option,{value:editor.id,children:editor.name},editor.id);})})})}),/*#__PURE__*/_jsxs(Col,{xs:24,lg:8,children:[/*#__PURE__*/_jsx(Form.Item,{hidden:true,name:['accountingPeriod','startsOn'],children:/*#__PURE__*/_jsx(Input,{hidden:true})}),/*#__PURE__*/_jsx(Form.Item,{hidden:true,name:['accountingPeriod','endsOn'],children:/*#__PURE__*/_jsx(Input,{hidden:true})}),/*#__PURE__*/_jsx(Form.Item,{rules:[{required:true,message:'O campo é obrigatório'}],label:'Período',name:'_accountingPeriod',children:/*#__PURE__*/_jsx(DatePicker.RangePicker,{style:{width:'100%'},format:'DD/MM/YYYY',onChange:function onChange(date){if(date!==null){var _ref5=date,_ref6=_slicedToArray(_ref5,2),startsOn=_ref6[0],endsOn=_ref6[1];form.setFieldsValue({accountingPeriod:{startsOn:startsOn.format('YYYY-MM-DD'),endsOn:endsOn.format('YYYY-MM-DD')}});}else{form.setFieldsValue({accountingPeriod:{startsOn:undefined,endsOn:undefined}});}}})})]}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Agendamento',name:'scheduledTo',rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsx(DatePicker,{disabledDate:function disabledDate(date){return date.isBefore(moment())||date.isAfter(moment().add(7,'days'));},style:{width:'100%'},format:'DD/MM/YYYY'})})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Col,{xs:24,lg:12,children:fetchingPaymentPreview?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Skeleton,{}),/*#__PURE__*/_jsx(Skeleton,{title:false})]}):!paymentPreview?/*#__PURE__*/_jsx(AskForPaymentPreview,{error:paymentPreviewError}):/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:'payment',children:[/*#__PURE__*/_jsx(Tabs.TabPane,{tab:'Demonstrativo',children:/*#__PURE__*/_jsxs(Descriptions,{labelStyle:{width:160},bordered:true,size:'small',column:1,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:'Editor',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.payee.name}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Período',children:/*#__PURE__*/_jsxs(Space,{children:[moment(paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.accountingPeriod.startsOn).format('DD/MM/YYYY'),/*#__PURE__*/_jsx(\"span\",{children:\"\\xE0\"}),moment(paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.accountingPeriod.endsOn).format('DD/MM/YYYY')]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Agendamento',children:scheduledTo&&moment(scheduledTo).format('DD/MM/YYYY')}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Palavras',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.earnings.words}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Ganhos',children:transformIntoBrl(paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.grandTotalAmount)}),paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bonuses.map(function(bonus,index){return/*#__PURE__*/_jsx(Descriptions.Item,{label:/*#__PURE__*/_jsxs(Space,{children:[\"B\\xF4nus \".concat(index+1),/*#__PURE__*/_jsx(Tooltip,{title:bonus.title,children:/*#__PURE__*/_jsx(InfoCircleFilled,{style:{color:'#09f',fontSize:18}})})]}),children:transformIntoBrl(bonus.amount)},index);}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Ganhos de posts',children:transformIntoBrl(paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.earnings.totalAmount)})]})},'payment'),/*#__PURE__*/_jsx(Tabs.TabPane,{tab:'Dados bancários',children:/*#__PURE__*/_jsxs(Descriptions,{bordered:true,labelStyle:{width:160},size:'small',column:1,children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:'Código do Banco',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bankAccount.bankCode}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Número da conta',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bankAccount.number}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Dígito da conta',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bankAccount.digit}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Agência',children:paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bankAccount.agency}),/*#__PURE__*/_jsx(Descriptions.Item,{label:'Tipo de conta',children:(paymentPreview===null||paymentPreview===void 0?void 0:paymentPreview.bankAccount.type)==='CHECKING'?'Conta corrente':'Conta poupança'})]})},'bankAccount')]})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:12,children:/*#__PURE__*/_jsx(Form.List,{name:'bonuses',children:function children(fields,_ref7){var add=_ref7.add,remove=_ref7.remove;return/*#__PURE__*/_jsxs(_Fragment,{children:[fields.map(function(field){return/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:14,children:/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},field),{},{name:[field.name,'title'],label:'Descrição',rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: 1 milhão de views'})}))}),/*#__PURE__*/_jsx(Col,{xs:24,lg:6,children:/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({initialValue:0},field),{},{name:[field.name,'amount'],label:'Valor',rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsx(CurrencyInput,{onChange:function onChange(a,amount){var _form$getFieldsValue3=form.getFieldsValue(),bonuses=_form$getFieldsValue3.bonuses;form.setFieldsValue({bonuses:bonuses===null||bonuses===void 0?void 0:bonuses.map(function(bonus,index){return index===field.name?{title:bonus.title,amount:amount}:bonus;})});}})}))}),/*#__PURE__*/_jsx(Col,{xs:24,lg:4,children:/*#__PURE__*/_jsx(Form.Item,{label:'Remover',children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return remove(field.name);},icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),danger:true,size:\"small\"})})})]},field.name);}),/*#__PURE__*/_jsx(Button,{type:\"dashed\",onClick:function onClick(){return add();},block:true,icon:/*#__PURE__*/_jsx(PlusOutlined,{}),children:\"Adicionar b\\xF4nus\"})]});}})})]}),/*#__PURE__*/_jsx(Row,{justify:\"end\",children:/*#__PURE__*/_jsx(Button,{type:'primary',htmlType:\"submit\",loading:schedulingPayment,children:\"Cadastrar agendamento\"})})]});}","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/app/features/PaymentForm.tsx"],"names":["DeleteOutlined","PlusOutlined","Button","Col","DatePicker","Descriptions","Divider","Form","Input","notification","Row","Select","Skeleton","Space","Tabs","Tooltip","useForm","moment","useCallback","debounce","InfoCircleFilled","useUsers","CurrencyInput","usePayment","transformIntoBrl","useState","AskForPaymentPreview","BusinessError","useEffect","useHistory","PaymentForm","form","editors","fetchUsers","fetching","history","fetchingPaymentPreview","clearPaymentPreview","paymentPreview","fetchPaymentPreview","schedulePayment","schedulingPayment","scheduledTo","setScheduledTo","paymentPreviewError","setPaymentPreviewError","updateScheduleDate","getFieldsValue","clearPaymentPreviewError","undefined","getPaymentPreview","accountingPeriod","bonuses","payee","id","endsOn","startsOn","handleFormChange","field","Array","isArray","name","includes","debouncedHandleFormChange","handleFormSubmit","paymentDto","format","success","message","push","required","input","option","children","normalize","replace","toLowerCase","indexOf","map","editor","width","date","setFieldsValue","isBefore","isAfter","add","earnings","words","grandTotalAmount","bonus","index","title","color","fontSize","amount","totalAmount","bankAccount","bankCode","number","digit","agency","type","fields","remove","a"],"mappings":"olBAAA,OAASA,cAAT,CAAyBC,YAAzB,KAA6C,mBAA7C,CACA,OACEC,MADF,CAEEC,GAFF,CAGEC,UAHF,CAIEC,YAJF,CAKEC,OALF,CAMEC,IANF,CAOEC,KAPF,CAQEC,YARF,CASEC,GATF,CAUEC,MAVF,CAWEC,QAXF,CAYEC,KAZF,CAaEC,IAbF,CAcEC,OAdF,KAeO,MAfP,CAgBA,OAASC,OAAT,KAAwB,oBAAxB,CAEA,MAAOC,CAAAA,MAAP,KAA+B,QAA/B,CAEA,OAASC,WAAT,KAA4B,OAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,mCAA7B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,CAEA,OAASC,aAAT,KAA8B,iCAA9B,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,6IAEA,cAAe,SAASC,CAAAA,WAAT,EAAuB,cACrBd,OAAO,EADc,sCAC7Be,IAD6B,4BAEMV,QAAQ,EAFd,CAE5BW,OAF4B,WAE5BA,OAF4B,CAEnBC,UAFmB,WAEnBA,UAFmB,CAEPC,QAFO,WAEPA,QAFO,CAGpC,GAAMC,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAHoC,gBAWhCN,UAAU,EAXsB,CAKlCa,sBALkC,aAKlCA,sBALkC,CAMlCC,mBANkC,aAMlCA,mBANkC,CAOlCC,cAPkC,aAOlCA,cAPkC,CAQlCC,mBARkC,aAQlCA,mBARkC,CASlCC,eATkC,aASlCA,eATkC,CAUlCC,iBAVkC,aAUlCA,iBAVkC,eAYEhB,QAAQ,CAAC,EAAD,CAZV,wCAY7BiB,WAZ6B,eAYhBC,cAZgB,8BAakBlB,QAAQ,EAb1B,yCAa7BmB,mBAb6B,eAaRC,sBAbQ,eAepCjB,SAAS,CAAC,UAAM,CACdK,UAAU,GACX,CAFQ,CAEN,CAACA,UAAD,CAFM,CAAT,CAIA,GAAMa,CAAAA,kBAAkB,CAAG5B,WAAW,CAAC,UAAM,0BACnBa,IAAI,CAACgB,cAAL,EADmB,CACnCL,WADmC,sBACnCA,WADmC,CAE3CC,cAAc,CAACD,WAAD,CAAd,CACD,CAHqC,CAGnC,CAACX,IAAD,CAHmC,CAAtC,CAKA,GAAMiB,CAAAA,wBAAwB,CAAG9B,WAAW,CAAC,UAAM,CACjD2B,sBAAsB,CAACI,SAAD,CAAtB,CACD,CAF2C,CAEzC,EAFyC,CAA5C,CAIA,GAAMC,CAAAA,iBAAiB,CAAGhC,WAAW,sEAAC,kNACSa,IAAI,CAACgB,cAAL,EADT,CAC5BI,gBAD4B,uBAC5BA,gBAD4B,CACVC,OADU,uBACVA,OADU,CACDC,KADC,uBACDA,KADC,MAEhCA,KAAK,EAAIF,gBAFuB,gCAG9BE,KAAK,CAACC,EAAN,EAAYH,gBAAgB,CAACI,MAA7B,EAAuCJ,gBAAgB,CAACK,QAH1B,iEAKxBjB,CAAAA,mBAAmB,CAAC,CACxBc,KAAK,CAALA,KADwB,CAExBF,gBAAgB,CAAhBA,gBAFwB,CAGxBC,OAAO,CAAEA,OAAO,EAAI,EAHI,CAAD,CALK,QAU9BJ,wBAAwB,GAVM,+EAY9BX,mBAAmB,GACnB,GAAI,sBAAeV,CAAAA,aAAnB,CAAkC,CAChCkB,sBAAsB,aAAtB,CACD,CAf6B,yDAmBhCR,mBAAmB,GACnBW,wBAAwB,GApBQ,oEAAD,GAuBlC,CACDjB,IADC,CAEDQ,mBAFC,CAGDF,mBAHC,CAIDW,wBAJC,CAvBkC,CAArC,CA8BA,GAAMS,CAAAA,gBAAgB,CAAGvC,WAAW,CAClC,eAA0B,mCAAxBwC,KAAwB,UACxB,GAAIC,KAAK,CAACC,OAAN,CAAcF,KAAd,SAAcA,KAAd,iBAAcA,KAAK,CAAEG,IAArB,CAAJ,CAAgC,CAC9B,GACEH,KAAK,CAACG,IAAN,CAAWC,QAAX,CAAoB,OAApB,GACAJ,KAAK,CAACG,IAAN,CAAWC,QAAX,CAAoB,mBAApB,CADA,EAEAJ,KAAK,CAACG,IAAN,CAAWC,QAAX,CAAoB,SAApB,CAHF,CAIE,CACAZ,iBAAiB,GAClB,CAED,GAAIQ,KAAK,CAACG,IAAN,CAAWC,QAAX,CAAoB,aAApB,CAAJ,CAAwC,CACtChB,kBAAkB,GACnB,CACF,CACF,CAfiC,CAgBlC,CAACI,iBAAD,CAAoBJ,kBAApB,CAhBkC,CAApC,CAmBA,GAAMiB,CAAAA,yBAAyB,CAAG5C,QAAQ,CAACsC,gBAAD,CAAmB,IAAnB,CAA1C,CAEA,GAAMO,CAAAA,gBAAgB,CAAG9C,WAAW,2FAClC,kBAAOa,IAAP,qIACQkC,UADR,CACoC,CAChCd,gBAAgB,CAAEpB,IAAI,CAACoB,gBADS,CAEhCE,KAAK,CAAEtB,IAAI,CAACsB,KAFoB,CAGhCD,OAAO,CAAErB,IAAI,CAACqB,OAAL,EAAgB,EAHO,CAIhCV,WAAW,CAAEzB,MAAM,CAACc,IAAI,CAACW,WAAN,CAAN,CAAyBwB,MAAzB,CAAgC,YAAhC,CAJmB,CADpC,wBAQQ1B,CAAAA,eAAe,CAACyB,UAAD,CARvB,QAUExD,YAAY,CAAC0D,OAAb,CAAqB,CACnBC,OAAO,CAAE,gCADU,CAArB,EAIAjC,OAAO,CAACkC,IAAR,CAAa,aAAb,EAdF,wDADkC,gEAiBlC,CAAC7B,eAAD,CAAkBL,OAAlB,CAjBkC,CAApC,CAoBA,mBACE,MAAC,IAAD,EACE,IAAI,CAAEJ,IADR,CAEE,MAAM,CAAE,UAFV,CAGE,cAAc,CAAEgC,yBAHlB,CAIE,QAAQ,CAAEC,gBAJZ,wBAME,MAAC,GAAD,EAAK,MAAM,CAAE,EAAb,wBACE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,EACE,KAAK,CAAE,CACL,CACEM,QAAQ,CAAE,IADZ,CAEEF,OAAO,CAAE,uBAFX,CADK,CADT,CAOE,KAAK,CAAE,QAPT,CAQE,IAAI,CAAE,CAAC,OAAD,CAAU,IAAV,CARR,uBAUE,KAAC,MAAD,EACE,UAAU,KADZ,CAEE,OAAO,CAAElC,QAFX,CAGE,WAAW,CACTA,QAAQ,CAAG,wBAAH,CAA8B,qBAJ1C,CAME,YAAY,CAAE,sBAACqC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,MACE,CAAAA,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEC,QAAR,CACGC,SADH,CACa,KADb,EAEGC,OAFH,CAEW,kBAFX,CAE+B,EAF/B,EAGGC,WAHH,GAIGC,OAJH,CAIWN,KAAK,CAACK,WAAN,EAJX,IAImC,CAJnC,EAKA,CAACJ,MAAD,SAACA,MAAD,iBAACA,MAAM,CAAEC,QAAT,EACGG,WADH,GAEGC,OAFH,CAEWN,KAAK,CAACK,WAAN,EAFX,GAEmC,CARrC,CAUD,CAjBH,UAmBG5C,OAAO,CAAC8C,GAAR,CAAY,SAACC,MAAD,qBACX,KAAC,MAAD,CAAQ,MAAR,EAA+B,KAAK,CAAEA,MAAM,CAACzB,EAA7C,UACGyB,MAAM,CAAClB,IADV,EAAoBkB,MAAM,CAACzB,EAA3B,CADW,EAAZ,CAnBH,EAVF,EADF,EADF,cAuCE,MAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,wBACE,KAAC,IAAD,CAAM,IAAN,EAAW,MAAM,KAAjB,CAAkB,IAAI,CAAE,CAAC,kBAAD,CAAqB,UAArB,CAAxB,uBACE,KAAC,KAAD,EAAO,MAAM,KAAb,EADF,EADF,cAIE,KAAC,IAAD,CAAM,IAAN,EAAW,MAAM,KAAjB,CAAkB,IAAI,CAAE,CAAC,kBAAD,CAAqB,QAArB,CAAxB,uBACE,KAAC,KAAD,EAAO,MAAM,KAAb,EADF,EAJF,cAOE,KAAC,IAAD,CAAM,IAAN,EACE,KAAK,CAAE,CACL,CACEgB,QAAQ,CAAE,IADZ,CAEEF,OAAO,CAAE,uBAFX,CADK,CADT,CAOE,KAAK,CAAE,SAPT,CAQE,IAAI,CAAE,mBARR,uBAUE,KAAC,UAAD,CAAY,WAAZ,EACE,KAAK,CAAE,CAAEY,KAAK,CAAE,MAAT,CADT,CAEE,MAAM,CAAE,YAFV,CAGE,QAAQ,CAAE,kBAACC,IAAD,CAAU,CAClB,GAAIA,IAAI,GAAK,IAAb,CAAmB,WACUA,IADV,+BACVzB,QADU,UACAD,MADA,UAEjBxB,IAAI,CAACmD,cAAL,CAAoB,CAClB/B,gBAAgB,CAAE,CAChBK,QAAQ,CAAEA,QAAQ,CAACU,MAAT,CAAgB,YAAhB,CADM,CAEhBX,MAAM,CAAEA,MAAM,CAACW,MAAP,CAAc,YAAd,CAFQ,CADA,CAApB,EAMD,CARD,IAQO,CACLnC,IAAI,CAACmD,cAAL,CAAoB,CAClB/B,gBAAgB,CAAE,CAChBK,QAAQ,CAAEP,SADM,CAEhBM,MAAM,CAAEN,SAFQ,CADA,CAApB,EAMD,CACF,CApBH,EAVF,EAPF,GAvCF,cAgFE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,EACE,KAAK,CAAE,aADT,CAEE,IAAI,CAAE,aAFR,CAGE,KAAK,CAAE,CACL,CACEqB,QAAQ,CAAE,IADZ,CAEEF,OAAO,CAAE,uBAFX,CADK,CAHT,uBAUE,KAAC,UAAD,EACE,YAAY,CAAE,sBAACa,IAAD,CAAU,CACtB,MACEA,CAAAA,IAAI,CAACE,QAAL,CAAclE,MAAM,EAApB,GACAgE,IAAI,CAACG,OAAL,CAAanE,MAAM,GAAGoE,GAAT,CAAa,CAAb,CAAgB,MAAhB,CAAb,CAFF,CAID,CANH,CAOE,KAAK,CAAE,CAAEL,KAAK,CAAE,MAAT,CAPT,CAQE,MAAM,CAAE,YARV,EAVF,EADF,EAhFF,cAuGE,KAAC,OAAD,IAvGF,cAwGE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,UACG5C,sBAAsB,cACrB,wCACE,KAAC,QAAD,IADF,cAEE,KAAC,QAAD,EAAU,KAAK,CAAE,KAAjB,EAFF,GADqB,CAKnB,CAACE,cAAD,cACF,KAAC,oBAAD,EAAsB,KAAK,CAAEM,mBAA7B,EADE,cAGF,MAAC,IAAD,EAAM,gBAAgB,CAAE,SAAxB,wBACE,KAAC,IAAD,CAAM,OAAN,EAAc,GAAG,CAAE,eAAnB,uBACE,MAAC,YAAD,EACE,UAAU,CAAE,CAAEoC,KAAK,CAAE,GAAT,CADd,CAEE,QAAQ,KAFV,CAGE,IAAI,CAAE,OAHR,CAIE,MAAM,CAAE,CAJV,wBAME,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,QAA1B,UACG1C,cADH,SACGA,cADH,iBACGA,cAAc,CAAEe,KAAhB,CAAsBQ,IADzB,EANF,cASE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,SAA1B,uBACE,MAAC,KAAD,YACG5C,MAAM,CAACqB,cAAD,SAACA,cAAD,iBAACA,cAAc,CAAEa,gBAAhB,CAAiCK,QAAlC,CAAN,CAAkDU,MAAlD,CACC,YADD,CADH,cAIE,8BAJF,CAKGjD,MAAM,CAACqB,cAAD,SAACA,cAAD,iBAACA,cAAc,CAAEa,gBAAhB,CAAiCI,MAAlC,CAAN,CAAgDW,MAAhD,CACC,YADD,CALH,GADF,EATF,cAoBE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,aAA1B,UACGxB,WAAW,EAAIzB,MAAM,CAACyB,WAAD,CAAN,CAAoBwB,MAApB,CAA2B,YAA3B,CADlB,EApBF,cAuBE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,UAA1B,UACG5B,cADH,SACGA,cADH,iBACGA,cAAc,CAAEgD,QAAhB,CAAyBC,KAD5B,EAvBF,cA0BE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,QAA1B,UACG/D,gBAAgB,CAACc,cAAD,SAACA,cAAD,iBAACA,cAAc,CAAEkD,gBAAjB,CADnB,EA1BF,CA6BGlD,cA7BH,SA6BGA,cA7BH,iBA6BGA,cAAc,CAAEc,OAAhB,CAAwB0B,GAAxB,CAA4B,SAACW,KAAD,CAAQC,KAAR,qBAC3B,KAAC,YAAD,CAAc,IAAd,EAEE,KAAK,cACH,MAAC,KAAD,+BACYA,KAAK,CAAG,CADpB,eAEE,KAAC,OAAD,EAAS,KAAK,CAAED,KAAK,CAACE,KAAtB,uBACE,KAAC,gBAAD,EACE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAT,CAAiBC,QAAQ,CAAE,EAA3B,CADT,EADF,EAFF,GAHJ,UAaGrE,gBAAgB,CAACiE,KAAK,CAACK,MAAP,CAbnB,EACOJ,KADP,CAD2B,EAA5B,CA7BH,cA8CE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,iBAA1B,UACGlE,gBAAgB,CAACc,cAAD,SAACA,cAAD,iBAACA,cAAc,CAAEgD,QAAhB,CAAyBS,WAA1B,CADnB,EA9CF,GADF,EAAyC,SAAzC,CADF,cAqDE,KAAC,IAAD,CAAM,OAAN,EAAc,GAAG,CAAE,iBAAnB,uBACE,MAAC,YAAD,EACE,QAAQ,KADV,CAEE,UAAU,CAAE,CAAEf,KAAK,CAAE,GAAT,CAFd,CAGE,IAAI,CAAE,OAHR,CAIE,MAAM,CAAE,CAJV,wBAME,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,iBAA1B,UACG1C,cADH,SACGA,cADH,iBACGA,cAAc,CAAE0D,WAAhB,CAA4BC,QAD/B,EANF,cASE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,iBAA1B,UACG3D,cADH,SACGA,cADH,iBACGA,cAAc,CAAE0D,WAAhB,CAA4BE,MAD/B,EATF,cAYE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,iBAA1B,UACG5D,cADH,SACGA,cADH,iBACGA,cAAc,CAAE0D,WAAhB,CAA4BG,KAD/B,EAZF,cAeE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,SAA1B,UACG7D,cADH,SACGA,cADH,iBACGA,cAAc,CAAE0D,WAAhB,CAA4BI,MAD/B,EAfF,cAkBE,KAAC,YAAD,CAAc,IAAd,EAAmB,KAAK,CAAE,eAA1B,UACG,CAAA9D,cAAc,OAAd,EAAAA,cAAc,SAAd,QAAAA,cAAc,CAAE0D,WAAhB,CAA4BK,IAA5B,IAAqC,UAArC,CACG,gBADH,CAEG,gBAHN,EAlBF,GADF,EAA2C,aAA3C,CArDF,GATJ,EAxGF,cAmME,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAE,SAAjB,UACG,kBAACC,MAAD,OAA6B,IAAlBjB,CAAAA,GAAkB,OAAlBA,GAAkB,CAAbkB,MAAa,OAAbA,MAAa,CAC5B,mBACE,2BACGD,MAAM,CAACxB,GAAP,CAAW,SAACpB,KAAD,CAAW,CACrB,mBACE,MAAC,GAAD,EAAK,MAAM,CAAE,EAAb,wBACE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,gCACMA,KADN,MAEE,IAAI,CAAE,CAACA,KAAK,CAACG,IAAP,CAAa,OAAb,CAFR,CAGE,KAAK,CAAE,WAHT,CAIE,KAAK,CAAE,CACL,CACES,QAAQ,CAAE,IADZ,CAEEF,OAAO,CAAE,uBAFX,CADK,CAJT,uBAWE,KAAC,KAAD,EAAO,WAAW,CAAE,yBAApB,EAXF,GADF,EADF,cAgBE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,8BACE,YAAY,CAAE,CADhB,EAEMV,KAFN,MAGE,IAAI,CAAE,CAACA,KAAK,CAACG,IAAP,CAAa,QAAb,CAHR,CAIE,KAAK,CAAE,OAJT,CAKE,KAAK,CAAE,CACL,CACES,QAAQ,CAAE,IADZ,CAEEF,OAAO,CAAE,uBAFX,CADK,CALT,uBAYE,KAAC,aAAD,EACE,QAAQ,CAAE,kBAACoC,CAAD,CAAIV,MAAJ,CAAe,2BACH/D,IAAI,CAACgB,cAAL,EADG,CACfK,OADe,uBACfA,OADe,CAEvBrB,IAAI,CAACmD,cAAL,CAAoB,CAClB9B,OAAO,CAAEA,OAAF,SAAEA,OAAF,iBAAEA,OAAO,CAAE0B,GAAT,CAAa,SAACW,KAAD,CAAQC,KAAR,CAAkB,CACtC,MAAOA,CAAAA,KAAK,GAAKhC,KAAK,CAACG,IAAhB,CACH,CAAE8B,KAAK,CAAEF,KAAK,CAACE,KAAf,CAAsBG,MAAM,CAANA,MAAtB,CADG,CAEHL,KAFJ,CAGD,CAJQ,CADS,CAApB,EAOD,CAVH,EAZF,GADF,EAhBF,cA2CE,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,CAAjB,uBACE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAE,SAAlB,uBACE,KAAC,MAAD,EACE,OAAO,CAAE,yBAAMc,CAAAA,MAAM,CAAC7C,KAAK,CAACG,IAAP,CAAZ,EADX,CAEE,IAAI,cAAE,KAAC,cAAD,IAFR,CAGE,MAAM,KAHR,CAIE,IAAI,CAAC,OAJP,EADF,EADF,EA3CF,GAAsBH,KAAK,CAACG,IAA5B,CADF,CAwDD,CAzDA,CADH,cA2DE,KAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,yBAAMwB,CAAAA,GAAG,EAAT,EAFX,CAGE,KAAK,KAHP,CAIE,IAAI,cAAE,KAAC,YAAD,IAJR,gCA3DF,GADF,CAsED,CAxEH,EADF,EAnMF,GANF,cAsRE,KAAC,GAAD,EAAK,OAAO,CAAC,KAAb,uBACE,KAAC,MAAD,EAAQ,IAAI,CAAE,SAAd,CAAyB,QAAQ,CAAC,QAAlC,CAA2C,OAAO,CAAE5C,iBAApD,mCADF,EAtRF,GADF,CA8RD","sourcesContent":["import { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Col,\n  DatePicker,\n  Descriptions,\n  Divider,\n  Form,\n  Input,\n  notification,\n  Row,\n  Select,\n  Skeleton,\n  Space,\n  Tabs,\n  Tooltip,\n} from 'antd';\nimport { useForm } from 'antd/lib/form/Form';\nimport { Payment } from 'danielbonifacio-sdk';\nimport moment, { Moment } from 'moment';\nimport { FieldData } from 'rc-field-form/lib/interface';\nimport { useCallback } from 'react';\nimport debounce from 'lodash.debounce';\nimport { InfoCircleFilled } from '@ant-design/icons';\nimport useUsers from '../../core/hooks/useUsers';\nimport CurrencyInput from '../components/CurrencyInput';\nimport usePayment from '../../core/hooks/usePayment';\nimport transformIntoBrl from '../../core/utils/transformIntoBrl';\nimport { useState } from 'react';\nimport AskForPaymentPreview from './AskForPaymentPreview';\nimport CustomError from 'danielbonifacio-sdk/dist/CustomError';\nimport { BusinessError } from 'danielbonifacio-sdk/dist/errors';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport default function PaymentForm() {\n  const [form] = useForm<Payment.Input>();\n  const { editors, fetchUsers, fetching } = useUsers();\n  const history = useHistory();\n  const {\n    fetchingPaymentPreview,\n    clearPaymentPreview,\n    paymentPreview,\n    fetchPaymentPreview,\n    schedulePayment,\n    schedulingPayment,\n  } = usePayment();\n  const [scheduledTo, setScheduledTo] = useState('');\n  const [paymentPreviewError, setPaymentPreviewError] = useState<CustomError>();\n\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  const updateScheduleDate = useCallback(() => {\n    const { scheduledTo } = form.getFieldsValue();\n    setScheduledTo(scheduledTo);\n  }, [form]);\n\n  const clearPaymentPreviewError = useCallback(() => {\n    setPaymentPreviewError(undefined);\n  }, []);\n\n  const getPaymentPreview = useCallback(async () => {\n    const { accountingPeriod, bonuses, payee } = form.getFieldsValue();\n    if (payee && accountingPeriod) {\n      if (payee.id && accountingPeriod.endsOn && accountingPeriod.startsOn) {\n        try {\n          await fetchPaymentPreview({\n            payee,\n            accountingPeriod,\n            bonuses: bonuses || [],\n          });\n          clearPaymentPreviewError();\n        } catch (err) {\n          clearPaymentPreview();\n          if (err instanceof BusinessError) {\n            setPaymentPreviewError(err);\n          }\n          throw err;\n        }\n      } else {\n        clearPaymentPreview();\n        clearPaymentPreviewError();\n      }\n    }\n  }, [\n    form,\n    fetchPaymentPreview,\n    clearPaymentPreview,\n    clearPaymentPreviewError,\n  ]);\n\n  const handleFormChange = useCallback(\n    ([field]: FieldData[]) => {\n      if (Array.isArray(field?.name)) {\n        if (\n          field.name.includes('payee') ||\n          field.name.includes('_accountingPeriod') ||\n          field.name.includes('bonuses')\n        ) {\n          getPaymentPreview();\n        }\n\n        if (field.name.includes('scheduledTo')) {\n          updateScheduleDate();\n        }\n      }\n    },\n    [getPaymentPreview, updateScheduleDate]\n  );\n\n  const debouncedHandleFormChange = debounce(handleFormChange, 1000);\n\n  const handleFormSubmit = useCallback(\n    async (form: Payment.Input) => {\n      const paymentDto: Payment.Input = {\n        accountingPeriod: form.accountingPeriod,\n        payee: form.payee,\n        bonuses: form.bonuses || [],\n        scheduledTo: moment(form.scheduledTo).format('YYYY-MM-DD'),\n      };\n\n      await schedulePayment(paymentDto);\n\n      notification.success({\n        message: 'Pagamento agendado com sucesso',\n      });\n\n      history.push('/pagamentos');\n    },\n    [schedulePayment, history]\n  );\n\n  return (\n    <Form<Payment.Input>\n      form={form}\n      layout={'vertical'}\n      onFieldsChange={debouncedHandleFormChange}\n      onFinish={handleFormSubmit}\n    >\n      <Row gutter={24}>\n        <Col xs={24} lg={8}>\n          <Form.Item\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n            ]}\n            label={'Editor'}\n            name={['payee', 'id']}\n          >\n            <Select\n              showSearch\n              loading={fetching}\n              placeholder={\n                fetching ? 'Carregando editores...' : 'Selecione um editor'\n              }\n              filterOption={(input, option) => {\n                return (\n                  option?.children\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '')\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0 ||\n                  (option?.children as string)\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                );\n              }}\n            >\n              {editors.map((editor) => (\n                <Select.Option key={editor.id} value={editor.id}>\n                  {editor.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n        </Col>\n        <Col xs={24} lg={8}>\n          <Form.Item hidden name={['accountingPeriod', 'startsOn']}>\n            <Input hidden />\n          </Form.Item>\n          <Form.Item hidden name={['accountingPeriod', 'endsOn']}>\n            <Input hidden />\n          </Form.Item>\n          <Form.Item\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n            ]}\n            label={'Período'}\n            name={'_accountingPeriod'}\n          >\n            <DatePicker.RangePicker\n              style={{ width: '100%' }}\n              format={'DD/MM/YYYY'}\n              onChange={(date) => {\n                if (date !== null) {\n                  const [startsOn, endsOn] = date as Moment[];\n                  form.setFieldsValue({\n                    accountingPeriod: {\n                      startsOn: startsOn.format('YYYY-MM-DD'),\n                      endsOn: endsOn.format('YYYY-MM-DD'),\n                    },\n                  });\n                } else {\n                  form.setFieldsValue({\n                    accountingPeriod: {\n                      startsOn: undefined,\n                      endsOn: undefined,\n                    },\n                  });\n                }\n              }}\n            />\n          </Form.Item>\n        </Col>\n        <Col xs={24} lg={8}>\n          <Form.Item\n            label={'Agendamento'}\n            name={'scheduledTo'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n            ]}\n          >\n            <DatePicker\n              disabledDate={(date) => {\n                return (\n                  date.isBefore(moment()) ||\n                  date.isAfter(moment().add(7, 'days'))\n                );\n              }}\n              style={{ width: '100%' }}\n              format={'DD/MM/YYYY'}\n            />\n          </Form.Item>\n        </Col>\n        <Divider />\n        <Col xs={24} lg={12}>\n          {fetchingPaymentPreview ? (\n            <>\n              <Skeleton />\n              <Skeleton title={false} />\n            </>\n          ) : !paymentPreview ? (\n            <AskForPaymentPreview error={paymentPreviewError} />\n          ) : (\n            <Tabs defaultActiveKey={'payment'}>\n              <Tabs.TabPane tab={'Demonstrativo'} key={'payment'}>\n                <Descriptions\n                  labelStyle={{ width: 160 }}\n                  bordered\n                  size={'small'}\n                  column={1}\n                >\n                  <Descriptions.Item label={'Editor'}>\n                    {paymentPreview?.payee.name}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Período'}>\n                    <Space>\n                      {moment(paymentPreview?.accountingPeriod.startsOn).format(\n                        'DD/MM/YYYY'\n                      )}\n                      <span>à</span>\n                      {moment(paymentPreview?.accountingPeriod.endsOn).format(\n                        'DD/MM/YYYY'\n                      )}\n                    </Space>\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Agendamento'}>\n                    {scheduledTo && moment(scheduledTo).format('DD/MM/YYYY')}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Palavras'}>\n                    {paymentPreview?.earnings.words}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Ganhos'}>\n                    {transformIntoBrl(paymentPreview?.grandTotalAmount)}\n                  </Descriptions.Item>\n                  {paymentPreview?.bonuses.map((bonus, index) => (\n                    <Descriptions.Item\n                      key={index}\n                      label={\n                        <Space>\n                          {`Bônus ${index + 1}`}\n                          <Tooltip title={bonus.title}>\n                            <InfoCircleFilled\n                              style={{ color: '#09f', fontSize: 18 }}\n                            />\n                          </Tooltip>\n                        </Space>\n                      }\n                    >\n                      {transformIntoBrl(bonus.amount)}\n                    </Descriptions.Item>\n                  ))}\n                  <Descriptions.Item label={'Ganhos de posts'}>\n                    {transformIntoBrl(paymentPreview?.earnings.totalAmount)}\n                  </Descriptions.Item>\n                </Descriptions>\n              </Tabs.TabPane>\n              <Tabs.TabPane tab={'Dados bancários'} key={'bankAccount'}>\n                <Descriptions\n                  bordered\n                  labelStyle={{ width: 160 }}\n                  size={'small'}\n                  column={1}\n                >\n                  <Descriptions.Item label={'Código do Banco'}>\n                    {paymentPreview?.bankAccount.bankCode}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Número da conta'}>\n                    {paymentPreview?.bankAccount.number}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Dígito da conta'}>\n                    {paymentPreview?.bankAccount.digit}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Agência'}>\n                    {paymentPreview?.bankAccount.agency}\n                  </Descriptions.Item>\n                  <Descriptions.Item label={'Tipo de conta'}>\n                    {paymentPreview?.bankAccount.type === 'CHECKING'\n                      ? 'Conta corrente'\n                      : 'Conta poupança'}\n                  </Descriptions.Item>\n                </Descriptions>\n              </Tabs.TabPane>\n            </Tabs>\n          )}\n        </Col>\n        <Col xs={24} lg={12}>\n          <Form.List name={'bonuses'}>\n            {(fields, { add, remove }) => {\n              return (\n                <>\n                  {fields.map((field) => {\n                    return (\n                      <Row gutter={24} key={field.name}>\n                        <Col xs={24} lg={14}>\n                          <Form.Item\n                            {...field}\n                            name={[field.name, 'title']}\n                            label={'Descrição'}\n                            rules={[\n                              {\n                                required: true,\n                                message: 'O campo é obrigatório',\n                              },\n                            ]}\n                          >\n                            <Input placeholder={'E.g.: 1 milhão de views'} />\n                          </Form.Item>\n                        </Col>\n                        <Col xs={24} lg={6}>\n                          <Form.Item\n                            initialValue={0}\n                            {...field}\n                            name={[field.name, 'amount']}\n                            label={'Valor'}\n                            rules={[\n                              {\n                                required: true,\n                                message: 'O campo é obrigatório',\n                              },\n                            ]}\n                          >\n                            <CurrencyInput\n                              onChange={(a, amount) => {\n                                const { bonuses } = form.getFieldsValue();\n                                form.setFieldsValue({\n                                  bonuses: bonuses?.map((bonus, index) => {\n                                    return index === field.name\n                                      ? { title: bonus.title, amount }\n                                      : bonus;\n                                  }),\n                                });\n                              }}\n                            />\n                          </Form.Item>\n                        </Col>\n                        <Col xs={24} lg={4}>\n                          <Form.Item label={'Remover'}>\n                            <Button\n                              onClick={() => remove(field.name)}\n                              icon={<DeleteOutlined />}\n                              danger\n                              size='small'\n                            />\n                          </Form.Item>\n                        </Col>\n                      </Row>\n                    );\n                  })}\n                  <Button\n                    type='dashed'\n                    onClick={() => add()}\n                    block\n                    icon={<PlusOutlined />}\n                  >\n                    Adicionar bônus\n                  </Button>\n                </>\n              );\n            }}\n          </Form.List>\n        </Col>\n      </Row>\n      <Row justify='end'>\n        <Button type={'primary'} htmlType='submit' loading={schedulingPayment}>\n          Cadastrar agendamento\n        </Button>\n      </Row>\n    </Form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}