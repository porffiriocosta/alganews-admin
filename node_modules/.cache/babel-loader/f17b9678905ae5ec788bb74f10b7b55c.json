{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport G6 from '@antv/g6';\nimport { isNumber } from '@antv/util';\nimport { deepClone, isType } from '../util/utils';\nimport { defaultMinimapCfg, defaultNodeSize, defaultCardStyle } from './constants';\nexport var getGraphSize = function (width, height, container) {\n  var CANVAS_WIDTH;\n  var CANVAS_HEIGHT;\n\n  if (container && container.current) {\n    CANVAS_WIDTH = container.current.offsetWidth;\n    CANVAS_HEIGHT = container.current.offsetHeight || 500;\n  }\n\n  if (!width && !CANVAS_WIDTH || !height && !CANVAS_HEIGHT) {\n    console.warn('请为 Graph 指定 width 与 height！否则将使用默认值 500 * 500');\n    return [500, 500];\n  }\n\n  return [width || CANVAS_WIDTH || 500, height || CANVAS_HEIGHT || 500];\n}; // 展开&折叠事件\n\nexport var bindDefaultEvents = function (graph) {\n  var onClick = function (e) {\n    var item = e.item;\n\n    if (e.target.get('name') === 'collapse-icon') {\n      graph.updateItem(item, {\n        collapsed: !item.getModel().collapsed\n      });\n      graph.layout();\n    }\n  };\n\n  graph.on('node:click', function (e) {\n    onClick(e);\n  });\n  graph.on('node:touchstart', function (e) {\n    onClick(e);\n  });\n};\nexport var renderGraph = function (graph, data, autoFit, adjustLayout) {\n  if (adjustLayout === void 0) {\n    adjustLayout = true;\n  }\n\n  var originData = deepClone(data);\n  graph.data(originData);\n  graph.render(); // 关闭局部刷新，各种 bug\n\n  graph.get('canvas').set('localRefresh', false);\n\n  if (adjustLayout) {\n    autoFit ? graph.fitView() : graph.fitCenter();\n  }\n};\nexport var processMinimap = function (cfg, graph) {\n  if (cfg === void 0) {\n    cfg = {};\n  }\n\n  if (!graph || graph.destroyed) return;\n\n  if (cfg.show) {\n    var curMminimapCfg = Object.assign(defaultMinimapCfg, cfg);\n    var minimap = new G6.Minimap(__assign({}, curMminimapCfg));\n    graph.addPlugin(minimap);\n    return minimap;\n  }\n\n  return null;\n};\n\nvar getUuid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}; // 同一页面存在多 graph 时需要指定 graphId\n\n\nexport var getGraphId = function (graph) {\n  if (graph.current) {\n    return graph.current;\n  }\n\n  graph.current = \"IndentedTreeGraph-\" + getUuid();\n  return graph.current;\n};\nexport var getMarkerPosition = function (direction, size) {\n  if (direction === void 0) {\n    direction = 'right';\n  }\n\n  var width = size[0],\n      height = size[1];\n  var x = 0;\n  var y = 0;\n\n  switch (direction) {\n    case 'top':\n      x = width / 2;\n      y = 0;\n      break;\n\n    case 'right':\n      x = width;\n      y = height / 2;\n      break;\n\n    case 'bottom':\n      x = width / 2;\n      y = height;\n      break;\n\n    case 'left':\n      x = 0;\n      y = height / 2;\n      break;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n};\nexport var bindSourceMapCollapseEvents = function (graph, fullData) {\n  var controlData = deepClone(fullData);\n\n  var onClick = function (e) {\n    var _a;\n\n    if (e.target.get('name') === 'collapse-icon') {\n      var item = e.item;\n      var collapsed = item.getModel().collapsed;\n\n      if (!isType(collapsed, 'Boolean')) {\n        // @ts-ignore\n        collapsed = (_a = item._cfg.group.getChildren().find(function (item) {\n          return item.get('name') === 'main-box';\n        })) === null || _a === void 0 ? void 0 : _a.attr('defaultCollapsed');\n      } // @ts-ignore\n\n\n      var marker = e.item._cfg.group.getChildren().find(function (item) {\n        return item.cfg.type === 'marker';\n      });\n\n      var _b = (fullData !== null && fullData !== void 0 ? fullData : {}).edges,\n          fullEdges_1 = _b === void 0 ? [] : _b;\n      var nodeId = item.getModel().id;\n      var targetNodeIds_1 = [];\n      var updateItems_1 = [];\n      var updateIds_1 = [];\n\n      var getLinkedId_1 = function (currentId) {\n        fullEdges_1.forEach(function (edge) {\n          var source = edge.source,\n              target = edge.target;\n\n          if (source === currentId) {\n            targetNodeIds_1.push(target);\n            getLinkedId_1(target);\n          }\n        });\n      };\n\n      getLinkedId_1(nodeId);\n\n      if (!collapsed) {\n        // collapse\n        graph.findAll('node', function (node) {\n          return targetNodeIds_1.includes(node.get('id'));\n        }).forEach(function (node) {\n          return graph.hideItem(node);\n        });\n        controlData.nodes.forEach(function (node) {\n          var _a = node.collapsedLevel,\n              collapsedLevel = _a === void 0 ? 0 : _a,\n              id = node.id;\n\n          if (targetNodeIds_1.includes(id)) {\n            node.collapsedLevel = collapsedLevel + 1;\n          }\n        });\n      } else {\n        // expand\n        graph.findAll('node', function (node) {\n          var collapsedLevel = controlData.nodes.find(function (item) {\n            return item.id === node.get('id');\n          }).collapsedLevel;\n          return targetNodeIds_1.includes(node.get('id')) && (!collapsedLevel || collapsedLevel < 2);\n        }).forEach(function (node) {\n          return graph.showItem(node);\n        });\n        controlData.nodes.forEach(function (node) {\n          var _a = node.collapsedLevel,\n              collapsedLevel = _a === void 0 ? 0 : _a,\n              id = node.id;\n\n          if (targetNodeIds_1.includes(id)) {\n            node.collapsedLevel = collapsedLevel - 1;\n          }\n        });\n      }\n\n      fullEdges_1.forEach(function (edge) {\n        var source = edge.source,\n            target = edge.target;\n\n        if (targetNodeIds_1.includes(target)) {\n          updateIds_1.push(source);\n        }\n      });\n      updateIds_1 = Array.from(new Set(updateIds_1));\n      updateIds_1.forEach(function (id) {\n        updateItems_1.push(graph.find('node', function (node) {\n          return node.get('id') === id;\n        }));\n      });\n      updateItems_1.forEach(function (nodeItem) {\n        graph.updateItem(nodeItem, {\n          collapsed: !nodeItem.getModel().collapsed\n        });\n        graph.refreshItem(nodeItem);\n      });\n    }\n  };\n\n  graph.on('node:click', function (e) {\n    onClick(e);\n  });\n  graph.on('node:touchstart', function (e) {\n    onClick(e);\n  });\n};\n/**\n * padding | margin 按 CSS 规则转换\n */\n\nexport var getCssPadding = function (padding) {\n  if (typeof padding === 'number') {\n    return [padding, padding, padding, padding];\n  }\n\n  var result = [];\n\n  switch (padding.length) {\n    case 1:\n      result = [padding[0], padding[0], padding[0], padding[0]];\n      break;\n\n    case 2:\n      result = [padding[0], padding[1], padding[0], padding[1]];\n      break;\n\n    case 3:\n      result = [padding[0], padding[1], padding[2], padding[1]];\n      break;\n\n    case 4:\n      result = padding;\n      break;\n\n    default:\n      break;\n  }\n\n  return result;\n}; // 默认箭头样式\n\nexport var getArrowCfg = function (arrowCfg, edge) {\n  if (!arrowCfg) {\n    return;\n  }\n\n  if (typeof arrowCfg === 'object' && (arrowCfg === null || arrowCfg === void 0 ? void 0 : arrowCfg.show) === false) {\n    return;\n  }\n\n  var cfg = typeof arrowCfg === 'function' ? arrowCfg(edge) : arrowCfg;\n  var _a = cfg.type,\n      type = _a === void 0 ? 'vee' : _a,\n      _b = cfg.d,\n      d = _b === void 0 ? 0 : _b,\n      _c = cfg.size,\n      size = _c === void 0 ? 10 : _c;\n  return __assign({\n    path: G6.Arrow[type](size, size, d),\n    fill: '#ccc',\n    d: d\n  }, cfg);\n}; // 交互\n\nexport var bindStateEvents = function (graph, cfg) {\n  var _a = cfg !== null && cfg !== void 0 ? cfg : {},\n      _b = _a.nodeCfg,\n      nodeCfg = _b === void 0 ? {} : _b,\n      _c = _a.edgeCfg,\n      edgeCfg = _c === void 0 ? {} : _c;\n\n  var nodeStateStyles = nodeCfg.nodeStateStyles;\n  var edgeStateStyles = edgeCfg.edgeStateStyles;\n  /**\n   * 存储交互状态\n   * id: [[endActive, endDefalut], [startActive, startDefalut]]\n   */\n\n  var statusCache = {};\n\n  var updateArrowFill = function (item, endArrowFill, stratArrowFill) {\n    graph.updateItem(item, {\n      style: {\n        endArrow: !!endArrowFill && {\n          fill: endArrowFill\n        },\n        startArrow: !!stratArrowFill && {\n          fill: stratArrowFill\n        }\n      }\n    });\n  };\n\n  var setState = function (item, name, status) {\n    var _a, _b, _c;\n\n    status ? item.toFront() : item.toBack();\n\n    var _d = (_a = item.getModel().style) !== null && _a !== void 0 ? _a : {},\n        endArrow = _d.endArrow,\n        startArrow = _d.startArrow;\n\n    if (endArrow || startArrow) {\n      if (!statusCache[item.getID()]) {\n        //@ts-ignore\n        var endArrowFill = (endArrow !== null && endArrow !== void 0 ? endArrow : {}).fill; //@ts-ignore\n\n        var startArrowFill = (startArrow !== null && startArrow !== void 0 ? startArrow : {}).fill;\n        var hoverStatus = (_c = (_b = item.getModel().style) === null || _b === void 0 ? void 0 : _b[name]) === null || _c === void 0 ? void 0 : _c.stroke;\n        statusCache[item.getID()] = [[hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : endArrowFill, endArrowFill], [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : startArrowFill, startArrowFill]];\n      }\n\n      var fill = statusCache[item.getID()];\n      updateArrowFill(item, endArrow && fill[0][status ? 0 : 1], startArrow && fill[1][status ? 0 : 1]);\n    }\n\n    graph.setItemState(item, name, status);\n  };\n\n  var getRelationItems = function (currentItem, name, status, type) {\n    var relationItems = type === 'node' ? graph.findAll('edge', function (edge) {\n      return edge.getSource() === currentItem || edge.getTarget() === currentItem;\n    }) : graph.findAll('node', function (node) {\n      return currentItem.getSource().get('id') === node.get('id') || currentItem.getTarget().get('id') === node.get('id');\n    });\n    var highlightItems = [currentItem].concat(relationItems);\n    highlightItems.forEach(function (item) {\n      setState(item, name, status);\n    });\n  };\n\n  if (nodeStateStyles) {\n    graph.on('node:mouseenter', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', true, 'node');\n    });\n    graph.on('node:mouseleave', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', false, 'node');\n    });\n  }\n\n  if (edgeStateStyles) {\n    graph.on('edge:mouseenter', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', true, 'edge');\n    });\n    graph.on('edge:mouseleave', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', false, 'edge');\n    });\n  }\n}; // 统一处理 config，支持回调\n\nexport var getStyle = function (source, cfg, item, current) {\n  if (typeof source === 'function') {\n    return source(cfg, item, current);\n  }\n\n  return source || {};\n}; // 统一处理 config，支持回调\n\nexport var getCommonConfig = function (cfg, item, graph) {\n  if (typeof cfg === 'function') {\n    return cfg(item, graph);\n  }\n\n  return cfg;\n};\nexport var getSize = function (size) {\n  if (Array.isArray(size)) {\n    return size;\n  }\n\n  return size ? [size, size] : defaultNodeSize;\n}; // status bar 的默认宽度\n\nvar DefaultStatusBarWidth = 4;\n/**\n * card status 对布局的影响，直接加到 padding 中\n */\n\nexport var getStatusBBox = function (cfg) {\n  if (!cfg) {\n    return [0, 0, 0, 0];\n  }\n\n  var _a = cfg.size,\n      size = _a === void 0 ? [] : _a,\n      _b = cfg.position,\n      position = _b === void 0 ? 'left' : _b;\n\n  var _c = getSize(size),\n      width = _c[0],\n      height = _c[1];\n\n  var appendPadding = [];\n\n  switch (position) {\n    case 'top':\n      appendPadding.push(height !== null && height !== void 0 ? height : DefaultStatusBarWidth, 0, 0, 0);\n      break;\n\n    case 'right':\n      appendPadding.push(0, width !== null && width !== void 0 ? width : DefaultStatusBarWidth, 0, 0);\n      break;\n\n    case 'bottom':\n      appendPadding.push(0, 0, height !== null && height !== void 0 ? height : DefaultStatusBarWidth, 0);\n      break;\n\n    case 'left':\n      appendPadding.push(0, 0, 0, width !== null && width !== void 0 ? width : DefaultStatusBarWidth);\n      break;\n  }\n\n  return appendPadding;\n};\nexport var getStatusCfg = function (cfg, cardSize) {\n  var _a = cfg !== null && cfg !== void 0 ? cfg : {},\n      _b = _a.size,\n      size = _b === void 0 ? [] : _b,\n      _c = _a.position,\n      position = _c === void 0 ? 'left' : _c;\n\n  var _d = getSize(size),\n      width = _d[0],\n      height = _d[1];\n\n  var cardWidth = cardSize[0],\n      cardHeight = cardSize[1];\n  var x = 0;\n  var y = 0;\n  var w = 0;\n  var h = 0;\n\n  switch (position) {\n    case 'top':\n      x = 0;\n      y = 0;\n      w = width !== null && width !== void 0 ? width : cardWidth;\n      h = height !== null && height !== void 0 ? height : DefaultStatusBarWidth;\n      break;\n\n    case 'left':\n      x = 0;\n      y = 0;\n      w = width !== null && width !== void 0 ? width : DefaultStatusBarWidth;\n      h = height !== null && height !== void 0 ? height : cardHeight;\n      break;\n\n    case 'right':\n      x = cardWidth - (isNumber(width) ? width : DefaultStatusBarWidth);\n      y = 0;\n      w = width !== null && width !== void 0 ? width : DefaultStatusBarWidth;\n      h = height !== null && height !== void 0 ? height : cardHeight;\n      break;\n\n    case 'bottom':\n      x = 0;\n      y = cardHeight - (isNumber(height) ? height : DefaultStatusBarWidth);\n      w = width !== null && width !== void 0 ? width : cardWidth;\n      h = height !== null && height !== void 0 ? height : DefaultStatusBarWidth;\n      break;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: w,\n    height: h\n  };\n};\nexport var createMarker = function (cfg, group, size) {\n  var show = cfg.show,\n      position = cfg.position,\n      collapsed = cfg.collapsed,\n      style = cfg.style;\n\n  if (show) {\n    group.addShape('marker', {\n      attrs: __assign(__assign(__assign({}, getMarkerPosition(position, size)), {\n        r: 6,\n        cursor: 'pointer',\n        symbol: collapsed ? G6.Marker.expand : G6.Marker.collapse,\n        stroke: defaultCardStyle.stroke,\n        lineWidth: 1,\n        fill: '#fff'\n      }), style),\n      defaultCollapsed: false,\n      name: 'collapse-icon'\n    });\n  }\n};","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/node_modules/@ant-design/charts/es/graphs/utils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","G6","isNumber","deepClone","isType","defaultMinimapCfg","defaultNodeSize","defaultCardStyle","getGraphSize","width","height","container","CANVAS_WIDTH","CANVAS_HEIGHT","current","offsetWidth","offsetHeight","console","warn","bindDefaultEvents","graph","onClick","e","item","target","get","updateItem","collapsed","getModel","layout","on","renderGraph","data","autoFit","adjustLayout","originData","render","set","fitView","fitCenter","processMinimap","cfg","destroyed","show","curMminimapCfg","minimap","Minimap","addPlugin","getUuid","replace","c","r","Math","random","v","toString","getGraphId","getMarkerPosition","direction","size","x","y","bindSourceMapCollapseEvents","fullData","controlData","_a","_cfg","group","getChildren","find","attr","marker","type","_b","edges","fullEdges_1","nodeId","id","targetNodeIds_1","updateItems_1","updateIds_1","getLinkedId_1","currentId","forEach","edge","source","push","findAll","node","includes","hideItem","nodes","collapsedLevel","showItem","Array","from","Set","nodeItem","refreshItem","getCssPadding","padding","result","getArrowCfg","arrowCfg","d","_c","path","Arrow","fill","bindStateEvents","nodeCfg","edgeCfg","nodeStateStyles","edgeStateStyles","statusCache","updateArrowFill","endArrowFill","stratArrowFill","style","endArrow","startArrow","setState","name","status","toFront","toBack","_d","getID","startArrowFill","hoverStatus","stroke","setItemState","getRelationItems","currentItem","relationItems","getSource","getTarget","highlightItems","concat","evt","getStyle","getCommonConfig","getSize","isArray","DefaultStatusBarWidth","getStatusBBox","position","appendPadding","getStatusCfg","cardSize","cardWidth","cardHeight","w","h","createMarker","addShape","attrs","cursor","symbol","Marker","expand","collapse","lineWidth","defaultCollapsed"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { isNumber } from '@antv/util';\nimport { deepClone, isType } from '../util/utils';\nimport { defaultMinimapCfg, defaultNodeSize, defaultCardStyle } from './constants';\nexport var getGraphSize = function (width, height, container) {\n    var CANVAS_WIDTH;\n    var CANVAS_HEIGHT;\n    if (container && container.current) {\n        CANVAS_WIDTH = container.current.offsetWidth;\n        CANVAS_HEIGHT = container.current.offsetHeight || 500;\n    }\n    if ((!width && !CANVAS_WIDTH) || (!height && !CANVAS_HEIGHT)) {\n        console.warn('请为 Graph 指定 width 与 height！否则将使用默认值 500 * 500');\n        return [500, 500];\n    }\n    return [width || CANVAS_WIDTH || 500, height || CANVAS_HEIGHT || 500];\n};\n// 展开&折叠事件\nexport var bindDefaultEvents = function (graph) {\n    var onClick = function (e) {\n        var item = e.item;\n        if (e.target.get('name') === 'collapse-icon') {\n            graph.updateItem(item, {\n                collapsed: !item.getModel().collapsed,\n            });\n            graph.layout();\n        }\n    };\n    graph.on('node:click', function (e) {\n        onClick(e);\n    });\n    graph.on('node:touchstart', function (e) {\n        onClick(e);\n    });\n};\nexport var renderGraph = function (graph, data, autoFit, adjustLayout) {\n    if (adjustLayout === void 0) { adjustLayout = true; }\n    var originData = deepClone(data);\n    graph.data(originData);\n    graph.render();\n    // 关闭局部刷新，各种 bug\n    graph.get('canvas').set('localRefresh', false);\n    if (adjustLayout) {\n        autoFit ? graph.fitView() : graph.fitCenter();\n    }\n};\nexport var processMinimap = function (cfg, graph) {\n    if (cfg === void 0) { cfg = {}; }\n    if (!graph || graph.destroyed)\n        return;\n    if (cfg.show) {\n        var curMminimapCfg = Object.assign(defaultMinimapCfg, cfg);\n        var minimap = new G6.Minimap(__assign({}, curMminimapCfg));\n        graph.addPlugin(minimap);\n        return minimap;\n    }\n    return null;\n};\nvar getUuid = function () {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\n// 同一页面存在多 graph 时需要指定 graphId\nexport var getGraphId = function (graph) {\n    if (graph.current) {\n        return graph.current;\n    }\n    graph.current = \"IndentedTreeGraph-\" + getUuid();\n    return graph.current;\n};\nexport var getMarkerPosition = function (direction, size) {\n    if (direction === void 0) { direction = 'right'; }\n    var width = size[0], height = size[1];\n    var x = 0;\n    var y = 0;\n    switch (direction) {\n        case 'top':\n            x = width / 2;\n            y = 0;\n            break;\n        case 'right':\n            x = width;\n            y = height / 2;\n            break;\n        case 'bottom':\n            x = width / 2;\n            y = height;\n            break;\n        case 'left':\n            x = 0;\n            y = height / 2;\n            break;\n    }\n    return { x: x, y: y };\n};\nexport var bindSourceMapCollapseEvents = function (graph, fullData) {\n    var controlData = deepClone(fullData);\n    var onClick = function (e) {\n        var _a;\n        if (e.target.get('name') === 'collapse-icon') {\n            var item = e.item;\n            var collapsed = item.getModel().collapsed;\n            if (!isType(collapsed, 'Boolean')) {\n                // @ts-ignore\n                collapsed = (_a = item._cfg.group\n                    .getChildren()\n                    .find(function (item) { return item.get('name') === 'main-box'; })) === null || _a === void 0 ? void 0 : _a.attr('defaultCollapsed');\n            }\n            // @ts-ignore\n            var marker = e.item._cfg.group.getChildren().find(function (item) { return item.cfg.type === 'marker'; });\n            var _b = (fullData !== null && fullData !== void 0 ? fullData : {}).edges, fullEdges_1 = _b === void 0 ? [] : _b;\n            var nodeId = item.getModel().id;\n            var targetNodeIds_1 = [];\n            var updateItems_1 = [];\n            var updateIds_1 = [];\n            var getLinkedId_1 = function (currentId) {\n                fullEdges_1.forEach(function (edge) {\n                    var source = edge.source, target = edge.target;\n                    if (source === currentId) {\n                        targetNodeIds_1.push(target);\n                        getLinkedId_1(target);\n                    }\n                });\n            };\n            getLinkedId_1(nodeId);\n            if (!collapsed) {\n                // collapse\n                graph\n                    .findAll('node', function (node) { return targetNodeIds_1.includes(node.get('id')); })\n                    .forEach(function (node) { return graph.hideItem(node); });\n                controlData.nodes.forEach(function (node) {\n                    var _a = node.collapsedLevel, collapsedLevel = _a === void 0 ? 0 : _a, id = node.id;\n                    if (targetNodeIds_1.includes(id)) {\n                        node.collapsedLevel = collapsedLevel + 1;\n                    }\n                });\n            }\n            else {\n                // expand\n                graph\n                    .findAll('node', function (node) {\n                    var collapsedLevel = controlData.nodes.find(function (item) { return item.id === node.get('id'); }).collapsedLevel;\n                    return (targetNodeIds_1.includes(node.get('id')) && (!collapsedLevel || collapsedLevel < 2));\n                })\n                    .forEach(function (node) { return graph.showItem(node); });\n                controlData.nodes.forEach(function (node) {\n                    var _a = node.collapsedLevel, collapsedLevel = _a === void 0 ? 0 : _a, id = node.id;\n                    if (targetNodeIds_1.includes(id)) {\n                        node.collapsedLevel = collapsedLevel - 1;\n                    }\n                });\n            }\n            fullEdges_1.forEach(function (edge) {\n                var source = edge.source, target = edge.target;\n                if (targetNodeIds_1.includes(target)) {\n                    updateIds_1.push(source);\n                }\n            });\n            updateIds_1 = Array.from(new Set(updateIds_1));\n            updateIds_1.forEach(function (id) {\n                updateItems_1.push(graph.find('node', function (node) { return node.get('id') === id; }));\n            });\n            updateItems_1.forEach(function (nodeItem) {\n                graph.updateItem(nodeItem, {\n                    collapsed: !nodeItem.getModel().collapsed,\n                });\n                graph.refreshItem(nodeItem);\n            });\n        }\n    };\n    graph.on('node:click', function (e) {\n        onClick(e);\n    });\n    graph.on('node:touchstart', function (e) {\n        onClick(e);\n    });\n};\n/**\n * padding | margin 按 CSS 规则转换\n */\nexport var getCssPadding = function (padding) {\n    if (typeof padding === 'number') {\n        return [padding, padding, padding, padding];\n    }\n    var result = [];\n    switch (padding.length) {\n        case 1:\n            result = [padding[0], padding[0], padding[0], padding[0]];\n            break;\n        case 2:\n            result = [padding[0], padding[1], padding[0], padding[1]];\n            break;\n        case 3:\n            result = [padding[0], padding[1], padding[2], padding[1]];\n            break;\n        case 4:\n            result = padding;\n            break;\n        default:\n            break;\n    }\n    return result;\n};\n// 默认箭头样式\nexport var getArrowCfg = function (arrowCfg, edge) {\n    if (!arrowCfg) {\n        return;\n    }\n    if (typeof arrowCfg === 'object' && (arrowCfg === null || arrowCfg === void 0 ? void 0 : arrowCfg.show) === false) {\n        return;\n    }\n    var cfg = typeof arrowCfg === 'function' ? arrowCfg(edge) : arrowCfg;\n    var _a = cfg.type, type = _a === void 0 ? 'vee' : _a, _b = cfg.d, d = _b === void 0 ? 0 : _b, _c = cfg.size, size = _c === void 0 ? 10 : _c;\n    return __assign({ path: G6.Arrow[type](size, size, d), fill: '#ccc', d: d }, cfg);\n};\n// 交互\nexport var bindStateEvents = function (graph, cfg) {\n    var _a = cfg !== null && cfg !== void 0 ? cfg : {}, _b = _a.nodeCfg, nodeCfg = _b === void 0 ? {} : _b, _c = _a.edgeCfg, edgeCfg = _c === void 0 ? {} : _c;\n    var nodeStateStyles = nodeCfg.nodeStateStyles;\n    var edgeStateStyles = edgeCfg.edgeStateStyles;\n    /**\n     * 存储交互状态\n     * id: [[endActive, endDefalut], [startActive, startDefalut]]\n     */\n    var statusCache = {};\n    var updateArrowFill = function (item, endArrowFill, stratArrowFill) {\n        graph.updateItem(item, {\n            style: {\n                endArrow: !!endArrowFill && {\n                    fill: endArrowFill,\n                },\n                startArrow: !!stratArrowFill && {\n                    fill: stratArrowFill,\n                },\n            },\n        });\n    };\n    var setState = function (item, name, status) {\n        var _a, _b, _c;\n        status ? item.toFront() : item.toBack();\n        var _d = (_a = item.getModel().style) !== null && _a !== void 0 ? _a : {}, endArrow = _d.endArrow, startArrow = _d.startArrow;\n        if (endArrow || startArrow) {\n            if (!statusCache[item.getID()]) {\n                //@ts-ignore\n                var endArrowFill = (endArrow !== null && endArrow !== void 0 ? endArrow : {}).fill;\n                //@ts-ignore\n                var startArrowFill = (startArrow !== null && startArrow !== void 0 ? startArrow : {}).fill;\n                var hoverStatus = (_c = (_b = item.getModel().style) === null || _b === void 0 ? void 0 : _b[name]) === null || _c === void 0 ? void 0 : _c.stroke;\n                statusCache[item.getID()] = [\n                    [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : endArrowFill, endArrowFill],\n                    [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : startArrowFill, startArrowFill],\n                ];\n            }\n            var fill = statusCache[item.getID()];\n            updateArrowFill(item, endArrow && fill[0][status ? 0 : 1], startArrow && fill[1][status ? 0 : 1]);\n        }\n        graph.setItemState(item, name, status);\n    };\n    var getRelationItems = function (currentItem, name, status, type) {\n        var relationItems = type === 'node'\n            ? graph.findAll('edge', function (edge) { return edge.getSource() === currentItem || edge.getTarget() === currentItem; })\n            : graph.findAll('node', function (node) {\n                return currentItem.getSource().get('id') === node.get('id') ||\n                    currentItem.getTarget().get('id') === node.get('id');\n            });\n        var highlightItems = [currentItem].concat(relationItems);\n        highlightItems.forEach(function (item) {\n            setState(item, name, status);\n        });\n    };\n    if (nodeStateStyles) {\n        graph.on('node:mouseenter', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', true, 'node');\n        });\n        graph.on('node:mouseleave', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', false, 'node');\n        });\n    }\n    if (edgeStateStyles) {\n        graph.on('edge:mouseenter', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', true, 'edge');\n        });\n        graph.on('edge:mouseleave', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', false, 'edge');\n        });\n    }\n};\n// 统一处理 config，支持回调\nexport var getStyle = function (source, cfg, item, current) {\n    if (typeof source === 'function') {\n        return source(cfg, item, current);\n    }\n    return source || {};\n};\n// 统一处理 config，支持回调\nexport var getCommonConfig = function (cfg, item, graph) {\n    if (typeof cfg === 'function') {\n        return cfg(item, graph);\n    }\n    return cfg;\n};\nexport var getSize = function (size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    return size ? [size, size] : defaultNodeSize;\n};\n// status bar 的默认宽度\nvar DefaultStatusBarWidth = 4;\n/**\n * card status 对布局的影响，直接加到 padding 中\n */\nexport var getStatusBBox = function (cfg) {\n    if (!cfg) {\n        return [0, 0, 0, 0];\n    }\n    var _a = cfg.size, size = _a === void 0 ? [] : _a, _b = cfg.position, position = _b === void 0 ? 'left' : _b;\n    var _c = getSize(size), width = _c[0], height = _c[1];\n    var appendPadding = [];\n    switch (position) {\n        case 'top':\n            appendPadding.push(height !== null && height !== void 0 ? height : DefaultStatusBarWidth, 0, 0, 0);\n            break;\n        case 'right':\n            appendPadding.push(0, width !== null && width !== void 0 ? width : DefaultStatusBarWidth, 0, 0);\n            break;\n        case 'bottom':\n            appendPadding.push(0, 0, height !== null && height !== void 0 ? height : DefaultStatusBarWidth, 0);\n            break;\n        case 'left':\n            appendPadding.push(0, 0, 0, width !== null && width !== void 0 ? width : DefaultStatusBarWidth);\n            break;\n    }\n    return appendPadding;\n};\nexport var getStatusCfg = function (cfg, cardSize) {\n    var _a = cfg !== null && cfg !== void 0 ? cfg : {}, _b = _a.size, size = _b === void 0 ? [] : _b, _c = _a.position, position = _c === void 0 ? 'left' : _c;\n    var _d = getSize(size), width = _d[0], height = _d[1];\n    var cardWidth = cardSize[0], cardHeight = cardSize[1];\n    var x = 0;\n    var y = 0;\n    var w = 0;\n    var h = 0;\n    switch (position) {\n        case 'top':\n            x = 0;\n            y = 0;\n            w = width !== null && width !== void 0 ? width : cardWidth;\n            h = height !== null && height !== void 0 ? height : DefaultStatusBarWidth;\n            break;\n        case 'left':\n            x = 0;\n            y = 0;\n            w = width !== null && width !== void 0 ? width : DefaultStatusBarWidth;\n            h = height !== null && height !== void 0 ? height : cardHeight;\n            break;\n        case 'right':\n            x = cardWidth - (isNumber(width) ? width : DefaultStatusBarWidth);\n            y = 0;\n            w = width !== null && width !== void 0 ? width : DefaultStatusBarWidth;\n            h = height !== null && height !== void 0 ? height : cardHeight;\n            break;\n        case 'bottom':\n            x = 0;\n            y = cardHeight - (isNumber(height) ? height : DefaultStatusBarWidth);\n            w = width !== null && width !== void 0 ? width : cardWidth;\n            h = height !== null && height !== void 0 ? height : DefaultStatusBarWidth;\n            break;\n    }\n    return {\n        x: x,\n        y: y,\n        width: w,\n        height: h,\n    };\n};\nexport var createMarker = function (cfg, group, size) {\n    var show = cfg.show, position = cfg.position, collapsed = cfg.collapsed, style = cfg.style;\n    if (show) {\n        group.addShape('marker', {\n            attrs: __assign(__assign(__assign({}, getMarkerPosition(position, size)), { r: 6, cursor: 'pointer', symbol: collapsed ? G6.Marker.expand : G6.Marker.collapse, stroke: defaultCardStyle.stroke, lineWidth: 1, fill: '#fff' }), style),\n            defaultCollapsed: false,\n            name: 'collapse-icon',\n        });\n    }\n};\n"]},"metadata":{},"sourceType":"module"}