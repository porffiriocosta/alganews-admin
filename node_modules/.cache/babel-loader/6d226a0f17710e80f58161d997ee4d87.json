{"ast":null,"code":"import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createReducer,isFulfilled,isPending,isRejected}from'@reduxjs/toolkit';import{UserService}from'danielbonifacio-sdk';var initialState={fetching:false,list:[]};export var getAllUsers=createAsyncThunk('user/getAllUsers',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,_ref){var rejectWithValue;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue;_context.prev=1;_context.next=4;return UserService.getAllUsers();case 4:return _context.abrupt(\"return\",_context.sent);case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_objectSpread({},_context.t0)));case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var toggleUserStatus=createAsyncThunk('user/toggleUserStatus',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!user.active){_context2.next=5;break;}_context2.next=3;return UserService.deactivateExistingUser(user.id);case 3:_context2.next=7;break;case 5:_context2.next=7;return UserService.activateExistingUser(user.id);case 7:return _context2.abrupt(\"return\",user);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}());export default createReducer(initialState,function(builder){var success=isFulfilled(getAllUsers,toggleUserStatus);var error=isRejected(getAllUsers,toggleUserStatus);var loading=isPending(getAllUsers,toggleUserStatus);builder.addCase(getAllUsers.fulfilled,function(state,action){state.list=action.payload;}).addMatcher(success,function(state){state.fetching=false;}).addMatcher(error,function(state,action){state.fetching=false;}).addMatcher(loading,function(state){state.fetching=true;});});","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/core/store/User.reducer.ts"],"names":["createAsyncThunk","createReducer","isFulfilled","isPending","isRejected","UserService","initialState","fetching","list","getAllUsers","_","rejectWithValue","toggleUserStatus","user","active","deactivateExistingUser","id","activateExistingUser","builder","success","error","loading","addCase","fulfilled","state","action","payload","addMatcher"],"mappings":"8bAAA,OACEA,gBADF,CAEEC,aAFF,CAGEC,WAHF,CAIEC,SAJF,CAKEC,UALF,KAMO,kBANP,CAOA,OAAeC,WAAf,KAAkC,qBAAlC,CAOA,GAAMC,CAAAA,YAAuB,CAAG,CAC9BC,QAAQ,CAAE,KADoB,CAE9BC,IAAI,CAAE,EAFwB,CAAhC,CAKA,MAAO,IAAMC,CAAAA,WAAW,CAAGT,gBAAgB,CACzC,kBADyC,2FAEzC,iBAAOU,CAAP,2IAAYC,eAAZ,MAAYA,eAAZ,uCAEiBN,CAAAA,WAAW,CAACI,WAAZ,EAFjB,+IAIWE,eAAe,+BAJ1B,sEAFyC,oEAApC,CAWP,MAAO,IAAMC,CAAAA,gBAAgB,CAAGZ,gBAAgB,CAC9C,uBAD8C,2FAE9C,kBAAOa,IAAP,0HACEA,IAAI,CAACC,MADP,iDAEYT,CAAAA,WAAW,CAACU,sBAAZ,CAAmCF,IAAI,CAACG,EAAxC,CAFZ,6DAGYX,CAAAA,WAAW,CAACY,oBAAZ,CAAiCJ,IAAI,CAACG,EAAtC,CAHZ,yCAKSH,IALT,0DAF8C,iEAAzC,CAWP,cAAeZ,CAAAA,aAAa,CAACK,YAAD,CAAe,SAACY,OAAD,CAAa,CACtD,GAAMC,CAAAA,OAAO,CAAGjB,WAAW,CAACO,WAAD,CAAcG,gBAAd,CAA3B,CACA,GAAMQ,CAAAA,KAAK,CAAGhB,UAAU,CAACK,WAAD,CAAcG,gBAAd,CAAxB,CACA,GAAMS,CAAAA,OAAO,CAAGlB,SAAS,CAACM,WAAD,CAAcG,gBAAd,CAAzB,CAEAM,OAAO,CACJI,OADH,CACWb,WAAW,CAACc,SADvB,CACkC,SAACC,KAAD,CAAQC,MAAR,CAAmB,CACjDD,KAAK,CAAChB,IAAN,CAAaiB,MAAM,CAACC,OAApB,CACD,CAHH,EAIGC,UAJH,CAIcR,OAJd,CAIuB,SAACK,KAAD,CAAW,CAC9BA,KAAK,CAACjB,QAAN,CAAiB,KAAjB,CACD,CANH,EAOGoB,UAPH,CAOcP,KAPd,CAOqB,SAACI,KAAD,CAAQC,MAAR,CAAmB,CACpCD,KAAK,CAACjB,QAAN,CAAiB,KAAjB,CACD,CATH,EAUGoB,UAVH,CAUcN,OAVd,CAUuB,SAACG,KAAD,CAAW,CAC9BA,KAAK,CAACjB,QAAN,CAAiB,IAAjB,CACD,CAZH,EAaD,CAlB2B,CAA5B","sourcesContent":["import {\n  createAsyncThunk,\n  createReducer,\n  isFulfilled,\n  isPending,\n  isRejected,\n} from '@reduxjs/toolkit';\nimport { User, UserService } from 'danielbonifacio-sdk';\n\ninterface UserState {\n  list: User.Summary[];\n  fetching: boolean;\n}\n\nconst initialState: UserState = {\n  fetching: false,\n  list: [],\n};\n\nexport const getAllUsers = createAsyncThunk(\n  'user/getAllUsers',\n  async (_, { rejectWithValue }) => {\n    try {\n      return await UserService.getAllUsers();\n    } catch (err) {\n      return rejectWithValue({ ...err });\n    }\n  }\n);\n\nexport const toggleUserStatus = createAsyncThunk(\n  'user/toggleUserStatus',\n  async (user: User.Summary | User.Detailed) => {\n    user.active\n      ? await UserService.deactivateExistingUser(user.id)\n      : await UserService.activateExistingUser(user.id);\n\n    return user;\n  }\n);\n\nexport default createReducer(initialState, (builder) => {\n  const success = isFulfilled(getAllUsers, toggleUserStatus);\n  const error = isRejected(getAllUsers, toggleUserStatus);\n  const loading = isPending(getAllUsers, toggleUserStatus);\n\n  builder\n    .addCase(getAllUsers.fulfilled, (state, action) => {\n      state.list = action.payload;\n    })\n    .addMatcher(success, (state) => {\n      state.fetching = false;\n    })\n    .addMatcher(error, (state, action) => {\n      state.fetching = false;\n    })\n    .addMatcher(loading, (state) => {\n      state.fetching = true;\n    });\n});\n"]},"metadata":{},"sourceType":"module"}