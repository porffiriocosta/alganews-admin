{"ast":null,"code":"import _toConsumableArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Col,Form,Input,Row,Avatar,DatePicker,Divider,Select,Tabs,Upload,Button,notification}from'antd';import React,{useCallback,useEffect,useState}from'react';import{FileService,UserService}from'danielbonifacio-sdk';import{UserOutlined}from'@ant-design/icons';import ImageCrop from'antd-img-crop';import CustomError from'danielbonifacio-sdk/dist/CustomError';import MaskedInput from'antd-mask-input';import{useHistory}from'react-router-dom';import CurrencyInput from'../components/CurrencyInput';import useAuth from'../../core/hooks/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TabPane=Tabs.TabPane;export default function UserForm(props){var _props$user,_props$user2,_props$user3,_props$user4,_props$user5;var history=useHistory();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(((_props$user=props.user)===null||_props$user===void 0?void 0:_props$user.avatarUrls.default)||''),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];var _useState5=useState('personal'),_useState6=_slicedToArray(_useState5,2),activeTab=_useState6[0],setActiveTab=_useState6[1];var _useAuth=useAuth(),authenticatedUser=_useAuth.user;var _useState7=useState(((_props$user2=props.user)===null||_props$user2===void 0?void 0:_props$user2.role)==='EDITOR'),_useState8=_slicedToArray(_useState7,2),isEditorRole=_useState8[0],setIsEditorRole=_useState8[1];var handleAvatarUpload=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(file){var avatarSource;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return FileService.upload(file);case 2:avatarSource=_context.sent;setAvatar(avatarSource);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);useEffect(function(){form.setFieldsValue({avatarUrl:avatar||undefined});},[avatar,form]);return/*#__PURE__*/_jsx(Form,{form:form,autoComplete:'off',layout:'vertical',onFinishFailed:function onFinishFailed(fields){var bankAccountErrors=0;var personalDataErrors=0;fields.errorFields.forEach(function(_ref2){var name=_ref2.name;if(name.includes('bankAccount'))bankAccountErrors++;if(name.includes('location')||name.includes('skills')||name.includes('phone')||name.includes('taxpayerId')||name.includes('pricePerWord'))personalDataErrors++;});if(bankAccountErrors>personalDataErrors){setActiveTab('bankAccount');}if(personalDataErrors>bankAccountErrors){setActiveTab('personal');}},onFinish:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){var userDTO,_error$data,_error$data2,_error$data3;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);console.log(user);userDTO=_objectSpread(_objectSpread({},user),{},{phone:user.phone.replace(/\\D/g,''),taxpayerId:user.taxpayerId.replace(/\\D/g,'')});if(!props.user){_context2.next=5;break;}return _context2.abrupt(\"return\",props.onUpdate&&props.onUpdate(userDTO).finally(function(){setLoading(false);}));case 5:_context2.prev=5;_context2.next=8;return UserService.insertNewUser(userDTO);case 8:history.push('/usuarios');notification.success({message:'Sucesso',description:'usuário criado com sucesso'});_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](5);console.log(_context2.t0);if(_context2.t0 instanceof CustomError){if((_error$data=_context2.t0.data)===null||_error$data===void 0?void 0:_error$data.objects){form.setFields(_context2.t0.data.objects.map(function(error){var _error$name;return{name:(_error$name=error.name)===null||_error$name===void 0?void 0:_error$name.split(/(\\.|\\[|\\])/gi).filter(function(str){return str!=='.'&&str!=='['&&str!==']'&&str!=='';}).map(function(str){return isNaN(Number(str))?str:Number(str);}),errors:[error.userMessage]};}));}else{notification.error({message:_context2.t0.message,description:((_error$data2=_context2.t0.data)===null||_error$data2===void 0?void 0:_error$data2.detail)==='Network Error'?'Erro na rede':(_error$data3=_context2.t0.data)===null||_error$data3===void 0?void 0:_error$data3.detail});}}else{notification.error({message:'Houve um erro'});}case 16:_context2.prev=16;setLoading(false);return _context2.finish(16);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[5,12,16,19]]);}));return function(_x2){return _ref3.apply(this,arguments);};}(),initialValues:props.user,children:/*#__PURE__*/_jsxs(Row,{gutter:24,align:'middle',children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:4,children:/*#__PURE__*/_jsxs(Row,{justify:'center',children:[/*#__PURE__*/_jsx(ImageCrop,{rotate:true,shape:'round',grid:true,aspect:1,children:/*#__PURE__*/_jsx(Upload,{maxCount:1,onRemove:function onRemove(){setAvatar('');},beforeUpload:function beforeUpload(file){handleAvatarUpload(file);return false;},fileList:_toConsumableArray(avatar?[{name:'Avatar',uid:''}]:[]),children:/*#__PURE__*/_jsx(Avatar,{style:{cursor:'pointer'},icon:/*#__PURE__*/_jsx(UserOutlined,{}),src:avatar,size:128})})}),/*#__PURE__*/_jsx(Form.Item,{name:'avatarUrl',hidden:true,children:/*#__PURE__*/_jsx(Input,{hidden:true})})]})}),/*#__PURE__*/_jsxs(Col,{xs:24,lg:8,children:[/*#__PURE__*/_jsx(Form.Item,{label:'Nome',name:'name',rules:[{required:true,message:'O campo é obrigatório'},{max:255,message:\"O nome n\\xE3o pode ter mais de 255 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: João Silva'})}),/*#__PURE__*/_jsx(Form.Item,{label:'Data de nascimento',name:'birthdate',rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsx(DatePicker,{style:{width:'100%'},format:'DD/MM/YYYY'})})]}),/*#__PURE__*/_jsx(Col,{xs:24,lg:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Bio',name:'bio',rules:[{required:true,message:'O campo é obrigatório'},{max:255,message:\"A biografia n\\xE3o pode ter mais de 255 caracteres\"},{min:10,message:\"A biografia n\\xE3o pode ter menos de 10 caracteres\"}],children:/*#__PURE__*/_jsx(Input.TextArea,{rows:5})})}),/*#__PURE__*/_jsx(Col,{xs:24,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Perfil',name:'role',rules:[{required:true,message:'O campo é obrigatório'},{type:'enum',enum:['EDITOR','ASSISTANT','MANAGER'],message:\"O Perfil precisar ser editor, assitente ou gerente\"}],children:/*#__PURE__*/_jsxs(Select,{disabled:props.user&&!((_props$user3=props.user)===null||_props$user3===void 0?void 0:_props$user3.canSensitiveDataBeUpdated),onChange:function onChange(value){setIsEditorRole(value==='EDITOR');},placeholder:'Selecione um perfil',children:[/*#__PURE__*/_jsx(Select.Option,{value:'EDITOR',children:\"Editor\"}),/*#__PURE__*/_jsx(Select.Option,{value:'ASSISTANT',children:\"Assistente\"}),/*#__PURE__*/_jsx(Select.Option,{value:'MANAGER',disabled:(authenticatedUser===null||authenticatedUser===void 0?void 0:authenticatedUser.role)!=='MANAGER',children:\"Gerente\"})]})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:12,children:/*#__PURE__*/_jsx(Form.Item,{label:'Email',name:'email',rules:[{required:true,message:'O campo é obrigatório'},{max:255,message:\"O email n\\xE3o pode ter mais de 255 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{type:\"email\",disabled:props.user&&!((_props$user4=props.user)===null||_props$user4===void 0?void 0:_props$user4.canSensitiveDataBeUpdated),placeholder:'E.g.: contato@joao.silva'})})}),/*#__PURE__*/_jsx(Col,{sm:24,children:/*#__PURE__*/_jsx(Divider,{})}),/*#__PURE__*/_jsx(Col,{sm:24,children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:'personal',activeKey:activeTab,onChange:function onChange(tab){return setActiveTab(tab);},children:[/*#__PURE__*/_jsx(TabPane,{tab:'Dados pessoais',children:/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'País',name:['location','country'],rules:[{required:true,message:'O campo é obrigatório'},{max:50,message:\"O pa\\xEDs n\\xE3o pode ter mais de 50 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: Brasil'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Estado',name:['location','state'],rules:[{required:true,message:'O campo é obrigatório'},{max:50,message:\"O estado n\\xE3o pode ter mais de 50 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: Espírito Santo'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Cidade',name:['location','city'],rules:[{required:true,message:'O campo é obrigatório'},{max:255,message:\"A cidade n\\xE3o pode ter mais de 255 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: Vitória'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Telefone',name:'phone',rules:[{required:true,message:'O campo é obrigatório'},{max:20,message:\"O telefone n\\xE3o pode ter mais de 20 caracteres\"}],children:/*#__PURE__*/_jsx(MaskedInput,{mask:\"(11) 11111-1111\",placeholder:'(27) 99999-0000',disabled:props.user&&!((_props$user5=props.user)===null||_props$user5===void 0?void 0:_props$user5.canSensitiveDataBeUpdated)})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'CPF',name:'taxpayerId',rules:[{required:true,message:'O campo é obrigatório'},{max:14,message:\"O CPF n\\xE3o pode ter mais de 14 caracteres\"}],children:/*#__PURE__*/_jsx(MaskedInput,{mask:\"111.111.111-11\",placeholder:'111.222.333-44'})})}),isEditorRole&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Preço por palavra',name:'pricePerWord',rules:[{required:true,message:'O campo é obrigatório'},{type:'number',min:0.01,message:'O valor mínimo é 1 centavo'}],children:/*#__PURE__*/_jsx(CurrencyInput,{onChange:function onChange(e,value){form.setFieldsValue({pricePerWord:value});}})})}),[1,2,3].map(function(_,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Col,{xs:18,lg:6,children:/*#__PURE__*/_jsx(Form.Item,{label:'Habilidade',name:['skills',index,'name'],rules:[{required:true,message:'O campo é obrigatório'},{max:50,message:\"A habilidade n\\xE3o pode ter mais de 50 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'E.g.: JavaScript'})})}),/*#__PURE__*/_jsx(Col,{xs:6,lg:2,children:/*#__PURE__*/_jsx(Form.Item,{label:'%',name:['skills',index,'percentage'],rules:[{required:true,message:''},{validator:function validator(field,value){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!isNaN(Number(value))){_context3.next=2;break;}throw new Error('Apenas números');case 2:if(!(Number(value)>100)){_context3.next=4;break;}throw new Error('Máximo é 100');case 4:if(!(Number(value)<0)){_context3.next=6;break;}throw new Error('Mínimo é 0');case 6:case\"end\":return _context3.stop();}}},_callee3);}))();}}],children:/*#__PURE__*/_jsx(Input,{})})})]},index);})]})]})},'personal'),/*#__PURE__*/_jsx(TabPane,{tab:'Dados bancários',forceRender:true,children:/*#__PURE__*/_jsxs(Row,{gutter:24,children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Instituição',name:['bankAccount','bankCode'],rules:[{required:true,message:'O campo é obrigatório'},{max:3,message:\"A institui\\xE7\\xE3o precisa ter 3 caracteres\"},{min:3,message:\"A institui\\xE7\\xE3o precisa ter 3 caracteres\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'260'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Agência',name:['bankAccount','agency'],rules:[{required:true,message:'O campo é obrigatório'},{max:10,message:\"A ag\\xEAncia precisa ter no m\\xE1ximo 10 caracteres\"},{min:1,message:\"A ag\\xEAncia precisa ter no m\\xEDnimo 1 caractere\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'0001'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Conta sem dígito',name:['bankAccount','number'],rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsx(Input,{placeholder:'12345'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Dígito',name:['bankAccount','digit'],rules:[{required:true,message:'O campo é obrigatório'},{max:1,message:\"O d\\xEDgito precisa ser \\xFAnico\"}],children:/*#__PURE__*/_jsx(Input,{placeholder:'1'})})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsx(Form.Item,{label:'Tipo de conta',name:['bankAccount','type'],rules:[{required:true,message:'O campo é obrigatório'}],children:/*#__PURE__*/_jsxs(Select,{placeholder:'Selecione o tipo de conta',children:[/*#__PURE__*/_jsx(Select.Option,{value:'SAVING',children:\"Conta poupan\\xE7a\"}),/*#__PURE__*/_jsx(Select.Option,{value:'CHECKING',children:\"Conta corrente\"})]})})})]})},'bankAccount')]})}),/*#__PURE__*/_jsx(Col,{xs:24,children:/*#__PURE__*/_jsx(Row,{justify:'end',children:/*#__PURE__*/_jsx(Button,{loading:loading,type:'primary',htmlType:'submit',children:props.user?'Atualizar usuário':'Cadastrar usuário'})})})]})});}","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/app/features/UserForm.tsx"],"names":["Col","Form","Input","Row","Avatar","DatePicker","Divider","Select","Tabs","Upload","Button","notification","React","useCallback","useEffect","useState","FileService","UserService","UserOutlined","ImageCrop","CustomError","MaskedInput","useHistory","CurrencyInput","useAuth","TabPane","UserForm","props","history","useForm","form","loading","setLoading","user","avatarUrls","default","avatar","setAvatar","activeTab","setActiveTab","authenticatedUser","role","isEditorRole","setIsEditorRole","handleAvatarUpload","file","upload","avatarSource","setFieldsValue","avatarUrl","undefined","fields","bankAccountErrors","personalDataErrors","errorFields","forEach","name","includes","console","log","userDTO","phone","replace","taxpayerId","onUpdate","finally","insertNewUser","push","success","message","description","data","objects","setFields","map","error","split","filter","str","isNaN","Number","errors","userMessage","detail","uid","cursor","required","max","width","min","type","enum","canSensitiveDataBeUpdated","value","tab","e","pricePerWord","_","index","validator","field","Error"],"mappings":"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","sourcesContent":["import {\n  Col,\n  Form,\n  Input,\n  Row,\n  Avatar,\n  DatePicker,\n  Divider,\n  Select,\n  Tabs,\n  Upload,\n  Button,\n  notification,\n} from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FileService, User, UserService } from 'danielbonifacio-sdk';\nimport { UserOutlined } from '@ant-design/icons';\nimport ImageCrop from 'antd-img-crop';\nimport CustomError from 'danielbonifacio-sdk/dist/CustomError';\nimport MaskedInput from 'antd-mask-input';\nimport { Moment } from 'moment';\nimport { useHistory } from 'react-router-dom';\nimport CurrencyInput from '../components/CurrencyInput';\nimport useAuth from '../../core/hooks/useAuth';\nconst { TabPane } = Tabs;\n\ntype UserFormType = {\n  createdAt: Moment;\n  updatedAt: Moment;\n  birthdate: Moment;\n} & Omit<User.Detailed, 'createdAt' | 'updatedAt' | 'birthdate'>;\n\ninterface UserFormProps {\n  user?: UserFormType;\n  onUpdate?: (user: User.Input) => Promise<any>;\n}\n\nexport default function UserForm(props: UserFormProps) {\n  const history = useHistory();\n  const [form] = Form.useForm<User.Input>();\n  const [loading, setLoading] = useState(false);\n\n  const [avatar, setAvatar] = useState(props.user?.avatarUrls.default || '');\n  const [activeTab, setActiveTab] = useState<'personal' | 'bankAccount'>(\n    'personal'\n  );\n\n  const { user: authenticatedUser } = useAuth();\n\n  const [isEditorRole, setIsEditorRole] = useState(\n    props.user?.role === 'EDITOR'\n  );\n\n  const handleAvatarUpload = useCallback(async (file: File) => {\n    const avatarSource = await FileService.upload(file);\n    setAvatar(avatarSource);\n  }, []);\n\n  useEffect(() => {\n    form.setFieldsValue({\n      avatarUrl: avatar || undefined,\n    });\n  }, [avatar, form]);\n\n  return (\n    <Form\n      form={form}\n      autoComplete={'off'}\n      layout={'vertical'}\n      onFinishFailed={(fields) => {\n        let bankAccountErrors = 0;\n        let personalDataErrors = 0;\n\n        fields.errorFields.forEach(({ name }) => {\n          if (name.includes('bankAccount')) bankAccountErrors++;\n          if (\n            name.includes('location') ||\n            name.includes('skills') ||\n            name.includes('phone') ||\n            name.includes('taxpayerId') ||\n            name.includes('pricePerWord')\n          )\n            personalDataErrors++;\n        });\n\n        if (bankAccountErrors > personalDataErrors) {\n          setActiveTab('bankAccount');\n        }\n        if (personalDataErrors > bankAccountErrors) {\n          setActiveTab('personal');\n        }\n      }}\n      onFinish={async (user: User.Input) => {\n        setLoading(true);\n        console.log(user);\n        const userDTO: User.Input = {\n          ...user,\n          phone: user.phone.replace(/\\D/g, ''),\n          taxpayerId: user.taxpayerId.replace(/\\D/g, ''),\n        };\n\n        if (props.user)\n          return (\n            props.onUpdate &&\n            props.onUpdate(userDTO).finally(() => {\n              setLoading(false);\n            })\n          );\n\n        try {\n          await UserService.insertNewUser(userDTO);\n          history.push('/usuarios');\n          notification.success({\n            message: 'Sucesso',\n            description: 'usuário criado com sucesso',\n          });\n        } catch (error) {\n          console.log(error);\n          if (error instanceof CustomError) {\n            if (error.data?.objects) {\n              form.setFields(\n                error.data.objects.map((error) => {\n                  return {\n                    name: error.name\n                      ?.split(/(\\.|\\[|\\])/gi)\n                      .filter(\n                        (str) =>\n                          str !== '.' &&\n                          str !== '[' &&\n                          str !== ']' &&\n                          str !== ''\n                      )\n                      .map((str) =>\n                        isNaN(Number(str)) ? str : Number(str)\n                      ) as string[],\n                    errors: [error.userMessage],\n                  };\n                })\n              );\n            } else {\n              notification.error({\n                message: error.message,\n                description:\n                  error.data?.detail === 'Network Error'\n                    ? 'Erro na rede'\n                    : error.data?.detail,\n              });\n            }\n          } else {\n            notification.error({\n              message: 'Houve um erro',\n            });\n          }\n        } finally {\n          setLoading(false);\n        }\n      }}\n      initialValues={props.user}\n    >\n      <Row gutter={24} align={'middle'}>\n        <Col xs={24} lg={4}>\n          <Row justify={'center'}>\n            <ImageCrop rotate shape={'round'} grid aspect={1}>\n              <Upload\n                maxCount={1}\n                onRemove={() => {\n                  setAvatar('');\n                }}\n                beforeUpload={(file) => {\n                  handleAvatarUpload(file);\n                  return false;\n                }}\n                fileList={[\n                  ...(avatar\n                    ? [\n                        {\n                          name: 'Avatar',\n                          uid: '',\n                        },\n                      ]\n                    : []),\n                ]}\n              >\n                <Avatar\n                  style={{ cursor: 'pointer' }}\n                  icon={<UserOutlined />}\n                  src={avatar}\n                  size={128}\n                />\n              </Upload>\n            </ImageCrop>\n            <Form.Item name={'avatarUrl'} hidden>\n              <Input hidden />\n            </Form.Item>\n          </Row>\n        </Col>\n        <Col xs={24} lg={8}>\n          <Form.Item\n            label={'Nome'}\n            name={'name'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n              {\n                max: 255,\n                message: `O nome não pode ter mais de 255 caracteres`,\n              },\n            ]}\n          >\n            <Input placeholder={'E.g.: João Silva'} />\n          </Form.Item>\n          <Form.Item\n            label={'Data de nascimento'}\n            name={'birthdate'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n            ]}\n          >\n            <DatePicker style={{ width: '100%' }} format={'DD/MM/YYYY'} />\n          </Form.Item>\n        </Col>\n        <Col xs={24} lg={12}>\n          <Form.Item\n            label={'Bio'}\n            name={'bio'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n              {\n                max: 255,\n                message: `A biografia não pode ter mais de 255 caracteres`,\n              },\n              {\n                min: 10,\n                message: `A biografia não pode ter menos de 10 caracteres`,\n              },\n            ]}\n          >\n            <Input.TextArea rows={5} />\n          </Form.Item>\n        </Col>\n        <Col xs={24}>\n          <Divider />\n        </Col>\n        <Col xs={24} lg={12}>\n          <Form.Item\n            label={'Perfil'}\n            name={'role'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n              {\n                type: 'enum',\n                enum: ['EDITOR', 'ASSISTANT', 'MANAGER'],\n                message: `O Perfil precisar ser editor, assitente ou gerente`,\n              },\n            ]}\n          >\n            <Select\n              disabled={props.user && !props.user?.canSensitiveDataBeUpdated}\n              onChange={(value) => {\n                setIsEditorRole(value === 'EDITOR');\n              }}\n              placeholder={'Selecione um perfil'}\n            >\n              <Select.Option value={'EDITOR'}>Editor</Select.Option>\n              <Select.Option value={'ASSISTANT'}>Assistente</Select.Option>\n              <Select.Option\n                value={'MANAGER'}\n                disabled={authenticatedUser?.role !== 'MANAGER'}\n              >\n                Gerente\n              </Select.Option>\n            </Select>\n          </Form.Item>\n        </Col>\n        <Col xs={24} lg={12}>\n          <Form.Item\n            label={'Email'}\n            name={'email'}\n            rules={[\n              {\n                required: true,\n                message: 'O campo é obrigatório',\n              },\n              {\n                max: 255,\n                message: `O email não pode ter mais de 255 caracteres`,\n              },\n            ]}\n          >\n            <Input\n              type='email'\n              disabled={props.user && !props.user?.canSensitiveDataBeUpdated}\n              placeholder={'E.g.: contato@joao.silva'}\n            />\n          </Form.Item>\n        </Col>\n        <Col sm={24}>\n          <Divider />\n        </Col>\n\n        <Col sm={24}>\n          <Tabs\n            defaultActiveKey={'personal'}\n            activeKey={activeTab}\n            onChange={(tab) => setActiveTab(tab as 'personal' | 'bankAccount')}\n          >\n            <TabPane key={'personal'} tab={'Dados pessoais'}>\n              <Row gutter={24}>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'País'}\n                    name={['location', 'country']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 50,\n                        message: `O país não pode ter mais de 50 caracteres`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'E.g.: Brasil'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Estado'}\n                    name={['location', 'state']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 50,\n                        message: `O estado não pode ter mais de 50 caracteres`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'E.g.: Espírito Santo'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Cidade'}\n                    name={['location', 'city']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 255,\n                        message: `A cidade não pode ter mais de 255 caracteres`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'E.g.: Vitória'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Telefone'}\n                    name={'phone'}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 20,\n                        message: `O telefone não pode ter mais de 20 caracteres`,\n                      },\n                    ]}\n                  >\n                    <MaskedInput\n                      mask='(11) 11111-1111'\n                      placeholder={'(27) 99999-0000'}\n                      disabled={\n                        props.user && !props.user?.canSensitiveDataBeUpdated\n                      }\n                    />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'CPF'}\n                    name={'taxpayerId'}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 14,\n                        message: `O CPF não pode ter mais de 14 caracteres`,\n                      },\n                    ]}\n                  >\n                    <MaskedInput\n                      mask='111.111.111-11'\n                      placeholder={'111.222.333-44'}\n                    />\n                  </Form.Item>\n                </Col>\n                {isEditorRole && (\n                  <>\n                    <Col xs={24} lg={8}>\n                      <Form.Item\n                        label={'Preço por palavra'}\n                        name={'pricePerWord'}\n                        rules={[\n                          {\n                            required: true,\n                            message: 'O campo é obrigatório',\n                          },\n                          {\n                            type: 'number',\n                            min: 0.01,\n                            message: 'O valor mínimo é 1 centavo',\n                          },\n                        ]}\n                      >\n                        <CurrencyInput\n                          onChange={(e, value) => {\n                            form.setFieldsValue({\n                              pricePerWord: value,\n                            });\n                          }}\n                        />\n                      </Form.Item>\n                    </Col>\n                    {[1, 2, 3].map((_, index) => {\n                      return (\n                        <React.Fragment key={index}>\n                          <Col xs={18} lg={6}>\n                            <Form.Item\n                              label={'Habilidade'}\n                              name={['skills', index, 'name']}\n                              rules={[\n                                {\n                                  required: true,\n                                  message: 'O campo é obrigatório',\n                                },\n                                {\n                                  max: 50,\n                                  message: `A habilidade não pode ter mais de 50 caracteres`,\n                                },\n                              ]}\n                            >\n                              <Input placeholder={'E.g.: JavaScript'} />\n                            </Form.Item>\n                          </Col>\n                          <Col xs={6} lg={2}>\n                            <Form.Item\n                              label={'%'}\n                              name={['skills', index, 'percentage']}\n                              rules={[\n                                {\n                                  required: true,\n                                  message: '',\n                                },\n                                {\n                                  async validator(field, value) {\n                                    if (isNaN(Number(value)))\n                                      throw new Error('Apenas números');\n                                    if (Number(value) > 100)\n                                      throw new Error('Máximo é 100');\n                                    if (Number(value) < 0)\n                                      throw new Error('Mínimo é 0');\n                                  },\n                                },\n                              ]}\n                            >\n                              <Input />\n                            </Form.Item>\n                          </Col>\n                        </React.Fragment>\n                      );\n                    })}\n                  </>\n                )}\n              </Row>\n            </TabPane>\n            <TabPane key={'bankAccount'} tab={'Dados bancários'} forceRender>\n              <Row gutter={24}>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Instituição'}\n                    name={['bankAccount', 'bankCode']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 3,\n                        message: `A instituição precisa ter 3 caracteres`,\n                      },\n                      {\n                        min: 3,\n                        message: `A instituição precisa ter 3 caracteres`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'260'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Agência'}\n                    name={['bankAccount', 'agency']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 10,\n                        message: `A agência precisa ter no máximo 10 caracteres`,\n                      },\n                      {\n                        min: 1,\n                        message: `A agência precisa ter no mínimo 1 caractere`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'0001'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Conta sem dígito'}\n                    name={['bankAccount', 'number']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'12345'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Dígito'}\n                    name={['bankAccount', 'digit']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                      {\n                        max: 1,\n                        message: `O dígito precisa ser único`,\n                      },\n                    ]}\n                  >\n                    <Input placeholder={'1'} />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} lg={8}>\n                  <Form.Item\n                    label={'Tipo de conta'}\n                    name={['bankAccount', 'type']}\n                    rules={[\n                      {\n                        required: true,\n                        message: 'O campo é obrigatório',\n                      },\n                    ]}\n                  >\n                    <Select placeholder={'Selecione o tipo de conta'}>\n                      <Select.Option value={'SAVING'}>\n                        Conta poupança\n                      </Select.Option>\n                      <Select.Option value={'CHECKING'}>\n                        Conta corrente\n                      </Select.Option>\n                    </Select>\n                  </Form.Item>\n                </Col>\n              </Row>\n            </TabPane>\n          </Tabs>\n        </Col>\n        <Col xs={24}>\n          <Row justify={'end'}>\n            <Button loading={loading} type={'primary'} htmlType={'submit'}>\n              {props.user ? 'Atualizar usuário' : 'Cadastrar usuário'}\n            </Button>\n          </Row>\n        </Col>\n      </Row>\n    </Form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}