{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactProjetos\\\\alganews-admin\\\\src\\\\app\\\\features\\\\EntryCategoryManager.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Button, Row, Table, Form, Input, Col, notification, Popconfirm } from 'antd';\nimport { useEffect } from 'react';\nimport { DeleteOutlined, CheckCircleOutlined, ReloadOutlined, PlusCircleOutlined } from '@ant-design/icons';\nimport useEntriesCategories from '../../core/hooks/useEntriesCategories';\nimport Modal from 'antd/lib/modal/Modal';\nimport { useState } from 'react';\nimport { useCallback } from 'react';\nimport Forbidden from '../components/Forbidden';\nimport useBreakpoint from 'antd/lib/grid/hooks/useBreakpoint';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EntryCategoryManager(props) {\n  _s();\n\n  const {\n    xs\n  } = useBreakpoint();\n  const {\n    expenses,\n    fetchCategories,\n    fetching,\n    revenues,\n    deleteCategory\n  } = useEntriesCategories();\n  const [showCreationModal, setShowCreationModal] = useState(false);\n  const openCreationModal = useCallback(() => setShowCreationModal(true), []);\n  const closeCreationModal = useCallback(() => setShowCreationModal(false), []);\n  const [forbidden, setForbidden] = useState(false);\n  useEffect(() => {\n    fetchCategories().catch(err => {\n      var _err$data;\n\n      if ((err === null || err === void 0 ? void 0 : (_err$data = err.data) === null || _err$data === void 0 ? void 0 : _err$data.status) === 403) {\n        setForbidden(true);\n        return;\n      }\n\n      throw err;\n    });\n  }, [fetchCategories]);\n  if (forbidden) return /*#__PURE__*/_jsxDEV(Forbidden, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      footer: null,\n      title: 'Adicionar categoria',\n      visible: showCreationModal,\n      onCancel: closeCreationModal,\n      destroyOnClose: true,\n      children: /*#__PURE__*/_jsxDEV(CategoryForm, {\n        onSuccess: () => {\n          closeCreationModal();\n          notification.success({\n            message: 'Categoria cadastrada com sucesso'\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      justify: 'space-between',\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: fetchCategories,\n        icon: /*#__PURE__*/_jsxDEV(ReloadOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 49\n        }, this),\n        children: xs ? 'Atualizar' : 'Atualizar categorias'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: openCreationModal,\n        icon: /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this),\n        type: 'primary',\n        children: xs ? 'Adicionar' : 'Adicionar categoria'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      size: \"small\",\n      rowKey: 'id',\n      loading: fetching,\n      dataSource: props.type === 'EXPENSE' ? expenses : revenues,\n      columns: [{\n        dataIndex: 'name',\n        title: 'Descrição'\n      }, {\n        dataIndex: 'totalEntries',\n        title: 'Vínculos',\n        align: 'right'\n      }, {\n        dataIndex: 'id',\n        title: 'Ações',\n        align: 'right',\n\n        render(id, record) {\n          return /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: 'Remover categoria?',\n            disabled: !record.canBeDeleted,\n            onConfirm: async () => {\n              await deleteCategory(id);\n              notification.success({\n                message: 'Categoria removida com sucesso'\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              danger: true,\n              type: 'ghost',\n              size: 'small',\n              icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 27\n              }, this),\n              disabled: !record.canBeDeleted\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this);\n        }\n\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(EntryCategoryManager, \"Kp3d7XqJOIw73yDlTRbGGQN64ts=\", false, function () {\n  return [useBreakpoint, useEntriesCategories];\n});\n\n_c = EntryCategoryManager;\n\nfunction CategoryForm(props) {\n  _s2();\n\n  const {\n    onSuccess\n  } = props;\n  const {\n    createCategory\n  } = useEntriesCategories();\n  const handleFormSubmit = useCallback(async form => {\n    const newCategoryDTO = { ...form,\n      type: 'EXPENSE'\n    };\n    await createCategory(newCategoryDTO);\n    onSuccess();\n  }, [createCategory, onSuccess]);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    layout: 'vertical',\n    onFinish: handleFormSubmit,\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      justify: 'end',\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: 'Categoria',\n          name: 'name',\n          rules: [{\n            required: true,\n            message: 'O nome da categoria é obrigatório'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: 'E.g.: Infra'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: 'primary',\n        htmlType: 'submit',\n        icon: /*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this),\n        children: \"Cadastrar categoria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(CategoryForm, \"b0cZqAVQpDTAJtqUmzVKL5zNu+s=\", false, function () {\n  return [useEntriesCategories];\n});\n\n_c2 = CategoryForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EntryCategoryManager\");\n$RefreshReg$(_c2, \"CategoryForm\");","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/app/features/EntryCategoryManager.tsx"],"names":["Button","Row","Table","Form","Input","Col","notification","Popconfirm","useEffect","DeleteOutlined","CheckCircleOutlined","ReloadOutlined","PlusCircleOutlined","useEntriesCategories","Modal","useState","useCallback","Forbidden","useBreakpoint","EntryCategoryManager","props","xs","expenses","fetchCategories","fetching","revenues","deleteCategory","showCreationModal","setShowCreationModal","openCreationModal","closeCreationModal","forbidden","setForbidden","catch","err","data","status","success","message","marginBottom","type","dataIndex","title","align","render","id","record","canBeDeleted","CategoryForm","onSuccess","createCategory","handleFormSubmit","form","newCategoryDTO","required"],"mappings":"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","sourcesContent":["import {\n  Button,\n  Row,\n  Table,\n  Form,\n  Input,\n  Col,\n  notification,\n  Popconfirm,\n} from 'antd';\nimport { CashFlow } from 'danielbonifacio-sdk';\nimport { useEffect } from 'react';\nimport {\n  DeleteOutlined,\n  CheckCircleOutlined,\n  ReloadOutlined,\n  PlusCircleOutlined,\n} from '@ant-design/icons';\nimport useEntriesCategories from '../../core/hooks/useEntriesCategories';\nimport Modal from 'antd/lib/modal/Modal';\nimport { useState } from 'react';\nimport { useCallback } from 'react';\nimport Forbidden from '../components/Forbidden';\nimport useBreakpoint from 'antd/lib/grid/hooks/useBreakpoint';\n\nexport default function EntryCategoryManager(props: {\n  type: 'EXPENSE' | 'REVENUE';\n}) {\n  const { xs } = useBreakpoint();\n  const { expenses, fetchCategories, fetching, revenues, deleteCategory } =\n    useEntriesCategories();\n\n  const [showCreationModal, setShowCreationModal] = useState(false);\n\n  const openCreationModal = useCallback(() => setShowCreationModal(true), []);\n  const closeCreationModal = useCallback(() => setShowCreationModal(false), []);\n\n  const [forbidden, setForbidden] = useState(false);\n\n  useEffect(() => {\n    fetchCategories().catch((err) => {\n      if (err?.data?.status === 403) {\n        setForbidden(true);\n        return;\n      }\n      throw err;\n    });\n  }, [fetchCategories]);\n\n  if (forbidden) return <Forbidden />;\n\n  return (\n    <>\n      <Modal\n        footer={null}\n        title={'Adicionar categoria'}\n        visible={showCreationModal}\n        onCancel={closeCreationModal}\n        destroyOnClose\n      >\n        <CategoryForm\n          onSuccess={() => {\n            closeCreationModal();\n            notification.success({\n              message: 'Categoria cadastrada com sucesso',\n            });\n          }}\n        />\n      </Modal>\n      <Row justify={'space-between'} style={{ marginBottom: 16 }}>\n        <Button onClick={fetchCategories} icon={<ReloadOutlined />}>\n          {xs ? 'Atualizar' : 'Atualizar categorias'}\n        </Button>\n        <Button\n          onClick={openCreationModal}\n          icon={<PlusCircleOutlined />}\n          type={'primary'}\n        >\n          {xs ? 'Adicionar' : 'Adicionar categoria'}\n        </Button>\n      </Row>\n      <Table<CashFlow.CategorySummary>\n        size='small'\n        rowKey={'id'}\n        loading={fetching}\n        dataSource={props.type === 'EXPENSE' ? expenses : revenues}\n        columns={[\n          {\n            dataIndex: 'name',\n            title: 'Descrição',\n          },\n          {\n            dataIndex: 'totalEntries',\n            title: 'Vínculos',\n            align: 'right',\n          },\n          {\n            dataIndex: 'id',\n            title: 'Ações',\n            align: 'right',\n            render(id: number, record) {\n              return (\n                <Popconfirm\n                  title={'Remover categoria?'}\n                  disabled={!record.canBeDeleted}\n                  onConfirm={async () => {\n                    await deleteCategory(id);\n                    notification.success({\n                      message: 'Categoria removida com sucesso',\n                    });\n                  }}\n                >\n                  <Button\n                    danger\n                    type={'ghost'}\n                    size={'small'}\n                    icon={<DeleteOutlined />}\n                    disabled={!record.canBeDeleted}\n                  />\n                </Popconfirm>\n              );\n            },\n          },\n        ]}\n      />\n    </>\n  );\n}\n\nfunction CategoryForm(props: { onSuccess: () => any }) {\n  const { onSuccess } = props;\n\n  const { createCategory } = useEntriesCategories();\n\n  const handleFormSubmit = useCallback(\n    async (form: CashFlow.CategoryInput) => {\n      const newCategoryDTO: CashFlow.CategoryInput = {\n        ...form,\n        type: 'EXPENSE',\n      };\n\n      await createCategory(newCategoryDTO);\n      onSuccess();\n    },\n    [createCategory, onSuccess]\n  );\n\n  return (\n    <Form layout={'vertical'} onFinish={handleFormSubmit}>\n      <Row justify={'end'}>\n        <Col xs={24}>\n          <Form.Item\n            label={'Categoria'}\n            name={'name'}\n            rules={[\n              { required: true, message: 'O nome da categoria é obrigatório' },\n            ]}\n          >\n            <Input placeholder={'E.g.: Infra'} />\n          </Form.Item>\n        </Col>\n        <Button\n          type={'primary'}\n          htmlType={'submit'}\n          icon={<CheckCircleOutlined />}\n        >\n          Cadastrar categoria\n        </Button>\n      </Row>\n    </Form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}