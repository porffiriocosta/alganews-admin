{"ast":null,"code":"import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{PaymentService}from'danielbonifacio-sdk';import{ResourceNotFoundError}from'danielbonifacio-sdk/dist/errors';import{useCallback}from'react';import{useState}from'react';export default function usePayment(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),payment=_useState4[0],setPayment=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),paymentPreview=_useState6[0],setPaymentPreview=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),fetchingPosts=_useState8[0],setFetchingPosts=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),fetchingPayment=_useState10[0],setFetchingPayment=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),approvingPayment=_useState12[0],setApprovingPayment=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),fetchingPaymentPreview=_useState14[0],setFetchingPaymentPreview=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),schedulingPayment=_useState16[0],setSchedulingPayment=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),paymentNotFound=_useState18[0],setPaymentNotFound=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),postsNotFound=_useState20[0],setPostsNotFound=_useState20[1];var fetchPayment=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(paymentId){var _payment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setFetchingPayment(true);_context.next=4;return PaymentService.getExistingPayment(paymentId);case 4:_payment=_context.sent;setPayment(_payment);_context.next=14;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(!(_context.t0 instanceof ResourceNotFoundError)){_context.next=13;break;}setPaymentNotFound(true);return _context.abrupt(\"return\");case 13:throw _context.t0;case 14:_context.prev=14;setFetchingPayment(false);return _context.finish(14);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,8,14,17]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var approvePayment=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(paymentId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setApprovingPayment(true);_context2.next=4;return PaymentService.approvePayment(paymentId);case 4:_context2.prev=4;setApprovingPayment(false);return _context2.finish(4);case 7:case\"end\":return _context2.stop();}}},_callee2,null,[[0,,4,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}(),[]);var fetchPosts=useCallback(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(paymentId){var _posts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setFetchingPosts(true);_context3.next=4;return PaymentService.getExistingPaymentPosts(paymentId);case 4:_posts=_context3.sent;setPosts(_posts);_context3.next=14;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);if(!(_context3.t0 instanceof ResourceNotFoundError)){_context3.next=13;break;}setPostsNotFound(true);return _context3.abrupt(\"return\");case 13:throw _context3.t0;case 14:_context3.prev=14;setFetchingPosts(false);return _context3.finish(14);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8,14,17]]);}));return function(_x3){return _ref3.apply(this,arguments);};}(),[]);var fetchPaymentPreview=useCallback(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(paymentPreview){var preview;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;setFetchingPaymentPreview(true);_context4.next=4;return PaymentService.getPaymentPreview(paymentPreview);case 4:preview=_context4.sent;setPaymentPreview(preview);case 6:_context4.prev=6;setFetchingPaymentPreview(false);return _context4.finish(6);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,,6,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}(),[]);var schedulePayment=useCallback(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(paymentInput){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;setSchedulingPayment(true);_context5.next=4;return PaymentService.insertNewPayment(paymentInput);case 4:_context5.prev=4;setSchedulingPayment(false);return _context5.finish(4);case 7:case\"end\":return _context5.stop();}}},_callee5,null,[[0,,4,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}(),[]);var clearPaymentPreview=useCallback(function(){setPaymentPreview(undefined);},[]);return{fetchPayment:fetchPayment,fetchPosts:fetchPosts,approvePayment:approvePayment,fetchPaymentPreview:fetchPaymentPreview,fetchingPayment:fetchingPayment,fetchingPosts:fetchingPosts,approvingPayment:approvingPayment,fetchingPaymentPreview:fetchingPaymentPreview,paymentNotFound:paymentNotFound,postsNotFound:postsNotFound,posts:posts,payment:payment,paymentPreview:paymentPreview,clearPaymentPreview:clearPaymentPreview,schedulePayment:schedulePayment,schedulingPayment:schedulingPayment};}","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/core/hooks/usePayment.ts"],"names":["PaymentService","ResourceNotFoundError","useCallback","useState","usePayment","posts","setPosts","payment","setPayment","paymentPreview","setPaymentPreview","fetchingPosts","setFetchingPosts","fetchingPayment","setFetchingPayment","approvingPayment","setApprovingPayment","fetchingPaymentPreview","setFetchingPaymentPreview","schedulingPayment","setSchedulingPayment","paymentNotFound","setPaymentNotFound","postsNotFound","setPostsNotFound","fetchPayment","paymentId","getExistingPayment","approvePayment","fetchPosts","getExistingPaymentPosts","fetchPaymentPreview","getPaymentPreview","preview","schedulePayment","paymentInput","insertNewPayment","clearPaymentPreview","undefined"],"mappings":"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","sourcesContent":["import { Payment, PaymentService, Post } from 'danielbonifacio-sdk';\nimport { ResourceNotFoundError } from 'danielbonifacio-sdk/dist/errors';\nimport { useCallback } from 'react';\nimport { useState } from 'react';\n\nexport default function usePayment() {\n  const [posts, setPosts] = useState<Post.WithEarnings[]>([]);\n  const [payment, setPayment] = useState<Payment.Detailed>();\n  const [paymentPreview, setPaymentPreview] = useState<Payment.Preview>();\n\n  const [fetchingPosts, setFetchingPosts] = useState(false);\n  const [fetchingPayment, setFetchingPayment] = useState(false);\n  const [approvingPayment, setApprovingPayment] = useState(false);\n  const [fetchingPaymentPreview, setFetchingPaymentPreview] = useState(false);\n  const [schedulingPayment, setSchedulingPayment] = useState(false);\n\n  const [paymentNotFound, setPaymentNotFound] = useState(false);\n  const [postsNotFound, setPostsNotFound] = useState(false);\n\n  const fetchPayment = useCallback(async (paymentId: number) => {\n    try {\n      setFetchingPayment(true);\n      const payment = await PaymentService.getExistingPayment(paymentId);\n      setPayment(payment);\n    } catch (error) {\n      if (error instanceof ResourceNotFoundError) {\n        setPaymentNotFound(true);\n        return;\n      }\n      throw error;\n    } finally {\n      setFetchingPayment(false);\n    }\n  }, []);\n\n  const approvePayment = useCallback(async (paymentId: number) => {\n    try {\n      setApprovingPayment(true);\n      await PaymentService.approvePayment(paymentId);\n    } finally {\n      setApprovingPayment(false);\n    }\n  }, []);\n\n  const fetchPosts = useCallback(async (paymentId: number) => {\n    try {\n      setFetchingPosts(true);\n      const posts = await PaymentService.getExistingPaymentPosts(paymentId);\n      setPosts(posts);\n    } catch (error) {\n      if (error instanceof ResourceNotFoundError) {\n        setPostsNotFound(true);\n        return;\n      }\n      throw error;\n    } finally {\n      setFetchingPosts(false);\n    }\n  }, []);\n\n  const fetchPaymentPreview = useCallback(\n    async (paymentPreview: Payment.PreviewInput) => {\n      try {\n        setFetchingPaymentPreview(true);\n        const preview = await PaymentService.getPaymentPreview(paymentPreview);\n        setPaymentPreview(preview);\n      } finally {\n        setFetchingPaymentPreview(false);\n      }\n    },\n    []\n  );\n\n  const schedulePayment = useCallback(async (paymentInput: Payment.Input) => {\n    try {\n      setSchedulingPayment(true);\n      await PaymentService.insertNewPayment(paymentInput);\n    } finally {\n      setSchedulingPayment(false);\n    }\n  }, []);\n\n  const clearPaymentPreview = useCallback(() => {\n    setPaymentPreview(undefined);\n  }, []);\n\n  return {\n    fetchPayment,\n    fetchPosts,\n    approvePayment,\n    fetchPaymentPreview,\n    fetchingPayment,\n    fetchingPosts,\n    approvingPayment,\n    fetchingPaymentPreview,\n    paymentNotFound,\n    postsNotFound,\n    posts,\n    payment,\n    paymentPreview,\n    clearPaymentPreview,\n    schedulePayment,\n    schedulingPayment,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}