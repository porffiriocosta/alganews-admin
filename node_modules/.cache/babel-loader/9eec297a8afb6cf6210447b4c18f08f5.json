{"ast":null,"code":"import _regeneratorRuntime from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/ReactProjetos/alganews-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Divider,notification,Row,Space,Tooltip,Typography}from'antd';import{InfoCircleFilled,TagOutlined,PlusCircleOutlined}from'@ant-design/icons';import EntriesList from'../features/EntriesList';import useCashFlow from'../../core/hooks/useCashFlow';import DoubleConfirm from'../components/DoubleConfirm';import Modal from'antd/lib/modal/Modal';import{useState}from'react';import{useCallback}from'react';import EntryCategoryManager from'../features/EntryCategoryManager';import EntryForm from'../features/EntryForm';import EntryDetails from'../features/EntryDetails';import moment from'moment';import useBreakpoint from'antd/lib/grid/hooks/useBreakpoint';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Title=Typography.Title,Text=Typography.Text;export default function EntryCRUD(_ref){var type=_ref.type;var _useCashFlow=useCashFlow(type),selected=_useCashFlow.selected,removeEntries=_useCashFlow.removeEntries,query=_useCashFlow.query;var _useBreakpoint=useBreakpoint(),xs=_useBreakpoint.xs;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),editingEntry=_useState2[0],setEditingEntry=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),detailedEntry=_useState4[0],setDetailedEntry=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showCategoryModal=_useState6[0],setShowCategoryModal=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showFormModal=_useState8[0],setShowFormModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showDetailsModal=_useState10[0],setShowDetailsModal=_useState10[1];var openCategoryModal=useCallback(function(){return setShowCategoryModal(true);},[]);var closeCategoryModal=useCallback(function(){return setShowCategoryModal(false);},[]);var openFormModal=useCallback(function(){return setShowFormModal(true);},[]);var closeFormModal=useCallback(function(){return setShowFormModal(false);},[]);var openDetailsModal=useCallback(function(){return setShowDetailsModal(true);},[]);var closeDetailsModal=useCallback(function(){return setShowDetailsModal(false);},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{closeIcon:null,visible:showCategoryModal,onCancel:closeCategoryModal,footer:null,title:'Gerenciar categorias',destroyOnClose:true,children:/*#__PURE__*/_jsx(EntryCategoryManager,{type:type})}),/*#__PURE__*/_jsx(Modal,{closeIcon:null,visible:showFormModal,onCancel:function onCancel(){closeFormModal();setEditingEntry(undefined);},footer:null,title:type==='EXPENSE'?'Cadastrar despesa':'Cadastrar receita',destroyOnClose:true,children:/*#__PURE__*/_jsx(EntryForm,{type:type,editingEntry:editingEntry,onSuccess:function onSuccess(){closeFormModal();notification.success({message:type==='EXPENSE'?'Despesa cadastrada com sucesso':'Receita cadastrada com sucesso'});}})}),/*#__PURE__*/_jsx(Modal,{closeIcon:null,visible:showDetailsModal,onCancel:function onCancel(){closeDetailsModal();},footer:null,title:'Detalhes da despesa',destroyOnClose:true,children:detailedEntry&&/*#__PURE__*/_jsx(EntryDetails,{entryId:detailedEntry})}),/*#__PURE__*/_jsxs(Row,{justify:'space-between',style:{marginBottom:16,flexDirection:xs?'column-reverse':'row'},children:[/*#__PURE__*/_jsx(Space,{style:_objectSpread({},xs&&{marginTop:16}),children:/*#__PURE__*/_jsx(DoubleConfirm,{popConfirmTitle:\"Remover \".concat(selected.length>1?type==='EXPENSE'?'despesas selecionadas?':'receitas selecionadas?':type==='EXPENSE'?'despesa selecionada?':'receita selecionada?'),modalTitle:type==='EXPENSE'?'Remover despesas':'Remover receitas',modalContent:type==='EXPENSE'?'Remover uma ou mais despesas pode gerar impacto negativo no gráfico de receitas e despesas da empresa. Esta é uma ação irreversível.':'Remover uma ou mais receitas pode gerar impacto negativo no gráfico de receitas e despesas da empresa. Esta é uma ação irreversível.',onConfirm:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return removeEntries(selected);case 2:case\"end\":return _context.stop();}}},_callee);})),disabled:!selected.length,children:/*#__PURE__*/_jsx(Button,{danger:xs,type:'primary',disabled:!selected.length,children:\"Remover\"})})}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:'primary',icon:/*#__PURE__*/_jsx(TagOutlined,{}),onClick:openCategoryModal,children:\"Categorias\"}),/*#__PURE__*/_jsxs(Button,{type:'primary',icon:/*#__PURE__*/_jsx(PlusCircleOutlined,{}),onClick:openFormModal,children:[\"Adicionar \",type==='EXPENSE'?'despesa':'receita']})]})]}),/*#__PURE__*/_jsxs(Space,{direction:'vertical',children:[/*#__PURE__*/_jsxs(Title,{level:3,children:[\"Recuperando \",type==='EXPENSE'?'despesas':'receitas',\" do m\\xEAs de\",' ',moment(query.yearMonth).format('MMMM \\\\d\\\\e YYYY')]}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(Text,{children:[\"\\xC9 poss\\xEDvel filtrar \",type==='EXPENSE'?'despesas':'receitas',' ',\"por m\\xEAs\"]}),/*#__PURE__*/_jsx(Tooltip,{placement:'right',title:'Use a coluna Data para filtrar',children:/*#__PURE__*/_jsx(InfoCircleFilled,{})})]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(EntriesList,{type:type,onEdit:function onEdit(id){setEditingEntry(id);openFormModal();},onDetail:function onDetail(id){setDetailedEntry(id);openDetailsModal();}})]});}","map":{"version":3,"sources":["D:/ReactProjetos/alganews-admin/src/app/features/EntryCRUD.tsx"],"names":["Button","Divider","notification","Row","Space","Tooltip","Typography","InfoCircleFilled","TagOutlined","PlusCircleOutlined","EntriesList","useCashFlow","DoubleConfirm","Modal","useState","useCallback","EntryCategoryManager","EntryForm","EntryDetails","moment","useBreakpoint","Title","Text","EntryCRUD","type","selected","removeEntries","query","xs","undefined","editingEntry","setEditingEntry","detailedEntry","setDetailedEntry","showCategoryModal","setShowCategoryModal","showFormModal","setShowFormModal","showDetailsModal","setShowDetailsModal","openCategoryModal","closeCategoryModal","openFormModal","closeFormModal","openDetailsModal","closeDetailsModal","success","message","marginBottom","flexDirection","marginTop","length","yearMonth","format","id"],"mappings":"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","sourcesContent":["import {\n  Button,\n  Divider,\n  notification,\n  Row,\n  Space,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport {\n  InfoCircleFilled,\n  TagOutlined,\n  PlusCircleOutlined,\n} from '@ant-design/icons';\nimport EntriesList from '../features/EntriesList';\nimport useCashFlow from '../../core/hooks/useCashFlow';\nimport DoubleConfirm from '../components/DoubleConfirm';\nimport Modal from 'antd/lib/modal/Modal';\nimport { useState } from 'react';\nimport { useCallback } from 'react';\nimport EntryCategoryManager from '../features/EntryCategoryManager';\nimport EntryForm from '../features/EntryForm';\nimport EntryDetails from '../features/EntryDetails';\nimport moment from 'moment';\nimport useBreakpoint from 'antd/lib/grid/hooks/useBreakpoint';\nconst { Title, Text } = Typography;\n\ninterface EntryCRUDProps {\n  type: 'EXPENSE' | 'REVENUE';\n}\n\nexport default function EntryCRUD({ type }: EntryCRUDProps) {\n  const { selected, removeEntries, query } = useCashFlow(type);\n  const { xs } = useBreakpoint();\n\n  const [editingEntry, setEditingEntry] = useState<number | undefined>(\n    undefined\n  );\n\n  const [detailedEntry, setDetailedEntry] = useState<number | undefined>(\n    undefined\n  );\n\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [showFormModal, setShowFormModal] = useState(false);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n\n  const openCategoryModal = useCallback(() => setShowCategoryModal(true), []);\n  const closeCategoryModal = useCallback(() => setShowCategoryModal(false), []);\n\n  const openFormModal = useCallback(() => setShowFormModal(true), []);\n  const closeFormModal = useCallback(() => setShowFormModal(false), []);\n\n  const openDetailsModal = useCallback(() => setShowDetailsModal(true), []);\n  const closeDetailsModal = useCallback(() => setShowDetailsModal(false), []);\n\n  return (\n    <>\n      <Modal\n        closeIcon={null}\n        visible={showCategoryModal}\n        onCancel={closeCategoryModal}\n        footer={null}\n        title={'Gerenciar categorias'}\n        destroyOnClose\n      >\n        <EntryCategoryManager type={type} />\n      </Modal>\n      <Modal\n        closeIcon={null}\n        visible={showFormModal}\n        onCancel={() => {\n          closeFormModal();\n          setEditingEntry(undefined);\n        }}\n        footer={null}\n        title={type === 'EXPENSE' ? 'Cadastrar despesa' : 'Cadastrar receita'}\n        destroyOnClose\n      >\n        <EntryForm\n          type={type}\n          editingEntry={editingEntry}\n          onSuccess={() => {\n            closeFormModal();\n            notification.success({\n              message:\n                type === 'EXPENSE'\n                  ? 'Despesa cadastrada com sucesso'\n                  : 'Receita cadastrada com sucesso',\n            });\n          }}\n        />\n      </Modal>\n      <Modal\n        closeIcon={null}\n        visible={showDetailsModal}\n        onCancel={() => {\n          closeDetailsModal();\n        }}\n        footer={null}\n        title={'Detalhes da despesa'}\n        destroyOnClose\n      >\n        {detailedEntry && <EntryDetails entryId={detailedEntry} />}\n      </Modal>\n      <Row\n        justify={'space-between'}\n        style={{\n          marginBottom: 16,\n          flexDirection: xs ? 'column-reverse' : 'row',\n        }}\n      >\n        <Space style={{ ...(xs && { marginTop: 16 }) }}>\n          <DoubleConfirm\n            popConfirmTitle={`Remover ${\n              selected.length > 1\n                ? type === 'EXPENSE'\n                  ? 'despesas selecionadas?'\n                  : 'receitas selecionadas?'\n                : type === 'EXPENSE'\n                ? 'despesa selecionada?'\n                : 'receita selecionada?'\n            }`}\n            modalTitle={\n              type === 'EXPENSE' ? 'Remover despesas' : 'Remover receitas'\n            }\n            modalContent={\n              type === 'EXPENSE'\n                ? 'Remover uma ou mais despesas pode gerar impacto negativo no gráfico de receitas e despesas da empresa. Esta é uma ação irreversível.'\n                : 'Remover uma ou mais receitas pode gerar impacto negativo no gráfico de receitas e despesas da empresa. Esta é uma ação irreversível.'\n            }\n            onConfirm={async () => {\n              await removeEntries(selected as number[]);\n            }}\n            disabled={!selected.length}\n          >\n            <Button danger={xs} type={'primary'} disabled={!selected.length}>\n              Remover\n            </Button>\n          </DoubleConfirm>\n        </Space>\n        <Space>\n          <Button\n            type={'primary'}\n            icon={<TagOutlined />}\n            onClick={openCategoryModal}\n          >\n            Categorias\n          </Button>\n          <Button\n            type={'primary'}\n            icon={<PlusCircleOutlined />}\n            onClick={openFormModal}\n          >\n            Adicionar {type === 'EXPENSE' ? 'despesa' : 'receita'}\n          </Button>\n        </Space>\n      </Row>\n      <Space direction={'vertical'}>\n        <Title level={3}>\n          Recuperando {type === 'EXPENSE' ? 'despesas' : 'receitas'} do mês de{' '}\n          {moment(query.yearMonth).format('MMMM \\\\d\\\\e YYYY')}\n        </Title>\n        <Space>\n          <Text>\n            É possível filtrar {type === 'EXPENSE' ? 'despesas' : 'receitas'}{' '}\n            por mês\n          </Text>\n          <Tooltip placement={'right'} title={'Use a coluna Data para filtrar'}>\n            <InfoCircleFilled />\n          </Tooltip>\n        </Space>\n      </Space>\n\n      <Divider />\n\n      <EntriesList\n        type={type}\n        onEdit={(id) => {\n          setEditingEntry(id);\n          openFormModal();\n        }}\n        onDetail={(id) => {\n          setDetailedEntry(id);\n          openDetailsModal();\n        }}\n      />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}